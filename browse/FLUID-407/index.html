<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-407  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-407 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-407/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-407/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-407/">FLUID-407</a></li>
            </ol>
        </nav>
        <h1>FLUID-407: Nested drop targets sometimes display the drop marker in the wrong place.</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-407">FLUID-407</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Anastasia Cheetham</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Michelle%20D'Souza">Michelle D'Souza</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2008-03-28T10:56:34.000-0400" prefix="">2008-03-28T10:56:34.000-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2008-07-11T14:33:48.000-0400" prefix="">2008-07-11T14:33:48.000-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>0.3</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Reorderer</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Information related to this issue moved from from <a href="/browse/FLUID-187/">FLUID-187</a>:</p>
<p>Sometimes in the uPortal mockup file, if a portlet is dragged <strong>quickly</strong> over another portlet, the drop marker is incorrectly displayed at the end of the column instead of relative to the target portlet.</p>
<p>With the 'greedy' flag on (which it is), the column should get an 'out' event when the dragging cursor moves from the column space into the portlet space, and on this out, we unbind the mousemove handler, trackMouseMovement() (which is what displays the dropMarker) from the column (and bind it to the portlet on the portlet's 'over').</p>
<p>We <strong>are</strong> getting the out event, and hence we are calling unbind(), but the mousemove handler continues fire, and hence continues to incorrectly display the dropMarker. So it looks like the unbind() is not properly unbinding.</p>
<p>dev-iteration33</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-15315">
                        <p class="mb-0"><b>Anastasia Cheetham</b> <i>commented <relative-time datetime="2008-03-31T13:28:36.000-0400">2008-03-31T13:28:36.000-0400</relative-time></i></p>
                        <p>Actually, the jQuery ticket mentioned in Michelle's comment is not related to this issue (it's related to an issue I encountered trying to remove the droppability from the avatar - the ticket is mentioned in the Reorderer.js, in case it is fixed.)<br>
(the incorrect jQuery link has now been removed.)</p>

                    </li>
                    
                    <li id="comment-15318">
                        <p class="mb-0"><b>Anastasia Cheetham</b> <i>commented <relative-time datetime="2008-03-31T15:47:37.000-0400">2008-03-31T15:47:37.000-0400</relative-time></i></p>
                        <p>The real issue seems to be unpredictability of the occurrance of the relevant over and out events.</p>
<p>When the cursor moves from the inner drop target to the outer drop target (and vice versa) both targets get appropriate over and out events, but the order that they occur in is not predictable. Sometimes, the over on the column might occur before the out on the portlet. The test file at<br>
<a href="http://anastasia.atrc.utoronto.ca/jquery-testing/ui/demos/ui.droppable.html">http://anastasia.atrc.utoronto.ca/jquery-testing/ui/demos/ui.droppable.html</a><br>
illustrates this clearly if you view the console logs as you drag the droppable in and out of the drop targets.</p>
<p>We use the over and out to decide when to show and hide the drop marker, and we re-use a single drop marker (we just move it around and show/hide it), so when the over and out occur in the 'wrong' order, we end up showing and hiding the drop marker inappropriately.</p>
<p>I think we will need to rethink how we handle the drop marker in light of the unpredictability of the necessary events.</p>

                    </li>
                    
                    <li id="comment-15321">
                        <p class="mb-0"><b>Anastasia Cheetham</b> <i>commented <relative-time datetime="2008-04-01T16:46:33.000-0400">2008-04-01T16:46:33.000-0400</relative-time></i></p>
                        <p>Another scenario that occurs with the unpredictability of the over/out events occurs with the portlets scenario.</p>
<p>When the avatar is dragged from one portlet to another, it passes over the column space between portets. This results (correctly) in an 'over' and 'out' on the column. On the over, the mouse tracker is bound to the column, and on the out it is unbound.</p>
<p>If the drag happens quickly, it's possible for the out to come before the over, leaving a mouse movement handler incorrectly bound to the column after it should have been removed.</p>
<p>This can be duplicated with the portlets example file: sample-code/reorderer/abstract/portal/portlets.html<br>
1) Pick up Portlet 6 and drag it over top of Portlet 8 (without dropping).<br>
2) Without dropping, drag the portlet between Portlets 8 and 9. If this is done quickly, the drop marker will sometimes be shown at the bottom of the column when it is supposed to be shown relative to a portlet. This is most noticable when it is supposed to be either before or after Portlet 8.</p>

                    </li>
                    
                    <li id="comment-15325">
                        <p class="mb-0"><b>Michelle D'Souza</b> <i>commented <relative-time datetime="2008-04-08T19:20:11.000-0400">2008-04-08T19:20:11.000-0400</relative-time></i></p>
                        <p>The implementation was changed to only pay attention to the 'over'. This reduces the likely-hood of seeing the bug but it still happens. To reproduce, make sure the mouse pointer is over the avatar when dragging around. </p>

                    </li>
                    
                    <li id="comment-15328">
                        <p class="mb-0"><b>Anastasia Cheetham</b> <i>commented <relative-time datetime="2008-05-14T15:18:06.000-0400">2008-05-14T15:18:06.000-0400</relative-time></i></p>
                        <p>We changed the drop marker handling to use mousemove events instead of over/out events.</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-406/"><span class="aria-hidden">←</span> Previous: FLUID-406</a>
        <a class="mx-1" href="/browse/FLUID-408/">Next: FLUID-408 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>