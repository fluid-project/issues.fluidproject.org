<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-5091  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-5091 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-5091/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-5091/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-5091/">FLUID-5091</a></li>
            </ol>
        </nav>
        <h1>FLUID-5091: Dynamic contributed grades do not merge components block correctly.</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-5091">FLUID-5091</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>y z</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=y%20z">y z</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2013-07-16T12:46:08.557-0400" prefix="">2013-07-16T12:46:08.557-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2014-03-03T11:31:11.175-0500" prefix="">2014-03-03T11:31:11.175-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.5</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>IoC System</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Merging of contributed dynamic grades happens as expected except for the components block. It seems like all other options are actually present in the final component. Test case can be found here: <a href="https://github.com/fluid-project/infusion/pull/362">https://github.com/fluid-project/infusion/pull/362</a></p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-20783">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2013-07-16T23:18:53.499-0400">2013-07-16T23:18:53.499-0400</relative-time></i></p>
                        <p>Thanks for this report and test case Yura - although this issue needs a little more description to qualify as a good writeup.<br>
It turns out that although this is indeed related to the existing <a href="/browse/FLUID-5028/">FLUID-5028</a>, it is a somewhat more straightforward issue and somewhat easier to patch. In fact the evaluation of the "components" field is caused early by the "old-style ginger resolution code" present in "fluid.makeGingerStrategy" - this makes an anticipatory check into the "components" field of every component it passes up the tree when it tries to resolve a reference - in particular the reference "{fluid.tests.builderComponent}.options.gradeName" in the grade structure causes this activity during the very earliest part of component instantiation, triggering the early resolution of the "components" member in all of the merging options blocks - since this is empty in the original (static) options set, it remains empty for all time during component instantiation.<br>
This would be resolved in a number of ways - for example, when we have <a href="/browse/FLUID-4925/">FLUID-4925</a> "wave of explosions" this check will no longer occur, likewise when we deprecate "initSubcomponents". Finally, it would also be resolved by a full fix to <a href="/browse/FLUID-5028/">FLUID-5028</a> itself - however, I've made a pull request with a quick patch for now, since any of these other changes involve ambitious improvements to the framework.</p>

                    </li>
                    
                    <li id="comment-20784">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2013-08-17T03:58:47.604-0400">2013-08-17T03:58:47.604-0400</relative-time></i></p>
                        <p>Finally resolved together with <a href="/browse/FLUID-5093/">FLUID-5093</a> by use of the new utility "destroyValue" - merged into trunk at revision 81831f</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-5090/"><span class="aria-hidden">←</span> Previous: FLUID-5090</a>
        <a class="mx-1" href="/browse/FLUID-5092/">Next: FLUID-5092 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>