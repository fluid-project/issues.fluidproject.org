<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-5030  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-5030 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-5030/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-5030/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-5030/">FLUID-5030</a></li>
            </ol>
        </nav>
        <h1>FLUID-5030: "createOnEvent" and events from additive grades are not merged in properly</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-5030">FLUID-5030</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Not%20A%20Bug">Not A Bug</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Cindy%20Li">Cindy Li</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2013-06-03T14:43:03.119-0400" prefix="">2013-06-03T14:43:03.119-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2014-03-03T11:49:41.119-0500" prefix="">2014-03-03T11:49:41.119-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.4</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Framework</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Example:</p>
<p>A component has an additive grade defined:</p>
<p>fluid.defaults("fluid.tests.fluid5030Root", {<br>
gradeNames: ["fluid.eventedComponent", "fluid.tests.fluid5030Grade", "autoInit"],<br>
...<br>
});</p>
<p>The grade component defines its own events and a subcomponent with a createOnEvent being one of these own events:</p>
<p>fluid.defaults("fluid.tests.fluid5030Grade", {<br>
gradeNames: ["fluid.tests.fluid5030Root", "autoInit"],<br>
events: {<br>
myevent: null<br>
},<br>
components: {<br>
subComponent: {<br>
createOnEvent: "myevent"<br>
}<br>
}<br>
...<br>
});</p>
<p>Create an instance of "fluid.tests.fluid5030Root"; in this instance, <br>
1. the "myevent" is not found<br>
2. the "subComponent" is created regardless of whether or not its createOnEvent is fired.</p>
<p>The test case to demonstrate this issue: <a href="https://github.com/cindyli/infusion/blob/FLUID-5010/src/webapp/tests/framework-tests/core/js/FluidIoCTests.js#L2763-2802">https://github.com/cindyli/infusion/blob/FLUID-5010/src/webapp/tests/framework-tests/core/js/FluidIoCTests.js#L2763-2802</a></p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-14794">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2013-06-03T17:21:48.485-0400">2013-06-03T17:21:48.485-0400</relative-time></i></p>
                        <p>When rewritten to the following, the test case works correctly - </p>
<p>/** <a href="/browse/FLUID-5030/">FLUID-5030</a> - "createOnEvent" and events from additive grades are not merged in properly **/</p>
<p>fluid.defaults("fluid.tests.fluid5030Grade", {<br>
gradeNames: ["fluid.eventedComponent"],<br>
events: {<br>
creationEvent: null<br>
},<br>
listeners: {<br>
creationEvent: {<br>
listener: "fluid.tests.fluid5030listener",<br>
args: "{that}"<br>
}<br>
},<br>
components: {<br>
subComponent: {<br>
createOnEvent: "creationEvent"<br>
}<br>
}<br>
});</p>
<p>fluid.defaults("fluid.tests.fluid5030Root", {<br>
gradeNames: ["fluid.eventedComponent", "fluid.tests.fluid5030Grade", "autoInit"],<br>
components: {<br>
subComponent: {<br>
type: "fluid.tests.fluid5030Sub"<br>
}<br>
}<br>
});</p>
<p>fluid.defaults("fluid.tests.fluid5030Sub", {<br>
gradeNames: ["fluid.eventedComponent", "autoInit"]<br>
});</p>
<p>fluid.tests.fluid5030listener = function (that) {<br>
that.creationEventFired = true;<br>
};</p>
<p>jqUnit.test("<a href="/browse/FLUID-5030/">FLUID-5030</a> - createOnEvent and events from additive grades are not merged in properly", function () {<br>
var root = fluid.tests.fluid5030Root();</p>
<p>jqUnit.assertNotUndefined("The event defined in the grade component is merged in", root.events.creationEvent);<br>
jqUnit.assertFalse("The createOnEvent is not fired", root.creationEventFired);<br>
jqUnit.assertUndefined("The subcomponent that should be created on createOnEvent is not created", root.subComponent);<br>
});</p>
<p>This is exposing the fact that the issue is in fact a different one - I reported this as <a href="/browse/FLUID-5032/">FLUID-5032</a> and closing in favour of that issue: You will notice that in the test you submitted, there are TWO failures rather than one - the first test, that the event defined in the grade component also fails, as well as the unexpected early creation of the subcomponent which is meant to be delayed until an event. This shows that actually none of the material in "fluid.tests.fluid5030Grade" is reaching the component, not just the "createOnEvent" annotation.</p>

                    </li>
                    
                    <li id="comment-14797">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2013-06-03T17:22:21.918-0400">2013-06-03T17:22:21.918-0400</relative-time></i></p>
                        <p>Closed in favour of <a href="/browse/FLUID-5032/">FLUID-5032</a></p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-5029/"><span class="aria-hidden">←</span> Previous: FLUID-5029</a>
        <a class="mx-1" href="/browse/FLUID-5031/">Next: FLUID-5031 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>