<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-6509  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-6509 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-6509/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-6509/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-6509/">FLUID-6509</a></li>
            </ol>
        </nav>
        <h1>FLUID-6509: fluid.construct no longer passes on exceptions to its caller</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-6509">FLUID-6509</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Reopened</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2020-05-29T11:45:49.812-0400" prefix="">2020-05-29T11:45:49.812-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2024-07-18T07:41:50.286-0400" prefix="">2024-07-18T07:41:50.286-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Framework</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>This issue only affects the in-progress <a href="/browse/FLUID-6148/">FLUID-6148</a> branch of the framework.</p>
<p>As part of the <a href="/browse/FLUID-6148/">FLUID-6148</a> work, all component construction has become "potentialised" and occurs in transactional units. The native signalling of failures has now been converted from exceptions to promise rejections since it is now possible for component construction to be asynchronous.</p>
<p>The old fluid.construct signature was "grandfathered in" to return its old payload to avoid disturbing the existing Nexus client, and instead the client signalled that they were aware of the new transactional system by supplying the "returnTransaction" flag in the 3rd argument, indicating that they expected the call to return the full transaction object rather than the single constructed root component as per the previous contract.</p>
<p>However, this has created an API hole - in the case the construction fails, the old-style API invocation simply returns undefined with no means of accessing the failure. We need to provide a similar adaptation as we do in fluid.initFreeComponent to convert the promise rejection back into an exception (in case the construction has failed synchronously) whilst encouraging users to update to the new API form (or even away from the so-called "Nexus API" entirely, in favour of the new potentialised methods fluid.registerPotentia and fluid.commitPotentiae).</p>
<p>This problem was encountered in Philip Tchernavskij's work on Nexus-gsheets when invoking fluid.construct via the old Nexus implementation at&#160;<a href="https://github.com/fluid-project/infusion-nexus/blob/d576f36a6a1f96337b925c64d66fa4081db76e4b/src/nexusUtils.js#L34">https://github.com/fluid-project/infusion-nexus/blob/d576f36a6a1f96337b925c64d66fa4081db76e4b/src/nexusUtils.js#L34</a></p>

            </div>
            
            
            
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-6508/"><span class="aria-hidden">←</span> Previous: FLUID-6508</a>
        <a class="mx-1" href="/browse/FLUID-6510/">Next: FLUID-6510 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>