<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-6746  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-6746 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-6746/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-6746/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-6746/">FLUID-6746</a></li>
            </ol>
        </nav>
        <h1>FLUID-6746: Corruption in notifying initial transaction relays where multiple initial model values are merged</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-6746">FLUID-6746</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Reopened</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2022-07-15T06:25:26.159-0400" prefix="">2022-07-15T06:25:26.159-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2022-12-21T10:11:49.464-0500" prefix="">2022-12-21T10:11:49.464-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>4.3</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>6.0</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Data Binder</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>In progress in <a href="https://github.com/continuing-creativity/youme/pull/2/files#diff-a133c4af0eace1a751ecd7cc8a393c78a6d11f723172b22386399a38a856705bR37">https://github.com/continuing-creativity/youme/pull/2/files#diff-a133c4af0eace1a751ecd7cc8a393c78a6d11f723172b22386399a38a856705bR37</a> - </p>
<p>There is a use of integral bindings where multiple initial model values are provided - there are the in-component defaults of </p>
<pre><code class="hljs language-java">model: {
            errorString: <span class="hljs-literal">false</span>,
            editorString: <span class="hljs-string">""</span>
        },
</code></pre>
<p>and then the subcomponent initial defaults of </p>
<pre><code class="hljs language-java">hex: {
                type: <span class="hljs-string">"youme.demos.console.textareaWithError"</span>,
                container: <span class="hljs-string">"{that}.dom.hex"</span>,
                options: {
                    model: {
                        errorString: <span class="hljs-string">"{console}.model.hexError"</span>,
                        editorString: <span class="hljs-string">"{console}.model.hexString"</span>
                    }
</code></pre>
<p>We see something bizarre happening, that during fluid.notifyInitModelWorkflow  somehow the "new" and "old" model values are reversed - the relays are notified as if the in-component defaults are the upcoming new values, overwritng the subcomponent defaults. However, once the component actually finishes initialising in ChangeApplier.initiate.commit, we see the initial and final models the right way round, and regular model listeners are notified in the ordinary way. This makes integral bindings pretty unusable in this case. #</p>
<p>The workaround is to remove the in-component default values, e.g. editorString: "" in youme.demos.console.textareaWithError and jsonString: "" in youme.demos.console</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-25209">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2022-07-15T06:28:50.108-0400">2022-07-15T06:28:50.108-0400</relative-time></i></p>
                        <p>This issue can be demonstrated by checking out <a href="https://github.com/amb26/youme/tree/FLUID-6746">https://github.com/amb26/youme/tree/FLUID-6746</a> and running demos/midi-console.html</p>

                    </li>
                    
                    <li id="comment-25210">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2022-12-21T10:11:15.061-0500">2022-12-21T10:11:15.061-0500</relative-time></i></p>
                        <p>Accidentally got closed by <a href="https://github.com/fluid-project/infusion-docs/commit/b37297e84c8964e81929c7f2317ed8f49b8a398c">https://github.com/fluid-project/infusion-docs/commit/b37297e84c8964e81929c7f2317ed8f49b8a398c</a> to infusion docs which mistyped <a href="/browse/FLUID-6746/">FLUID-6746</a> for <a href="/browse/FLUID-6476/">FLUID-6476</a></p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-6745/"><span class="aria-hidden">←</span> Previous: FLUID-6745</a>
        <a class="mx-1" href="/browse/FLUID-6747/">Next: FLUID-6747 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>