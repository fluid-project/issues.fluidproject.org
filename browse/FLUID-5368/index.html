<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-5368  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-5368 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-5368/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-5368/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-5368/">FLUID-5368</a></li>
            </ol>
        </nav>
        <h1>FLUID-5368: Using "fluid.transforms.arrayToSetMembership" with any other transformations in modelRelay option causes the source array value disappear</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-5368">FLUID-5368</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Blocker</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Cindy%20Li">Cindy Li</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2014-05-12T11:01:10.101-0400" prefix="">2014-05-12T11:01:10.101-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2014-05-28T09:14:03.649-0400" prefix="">2014-05-28T09:14:03.649-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.4</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.5</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Data Binder</li>
                            
                            <li>Model Transformation System</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>In a component with the default model and the modelRelay option as this:</p>
<p>...<br>
model: {<br>
forArrayToSetMembership: ["value1"],<br>
forIdentity: ["value2"]<br>
},<br>
modelRelay: [{<br>
source: "{fluid9999}.model.forIdentity",<br>
target: "{fluid9999}.model.modelInTransit.forIdentity",<br>
singleTransform: {<br>
type: "fluid.transforms.identity"<br>
}<br>
}, {<br>
source: "{fluid9999}.model.forArrayToSetMembership",<br>
target: "{fluid9999}.model.modelInTransit",<br>
singleTransform: {<br>
type: "fluid.transforms.arrayToSetMembership",<br>
options: {<br>
"value1": "value1"<br>
}<br>
}<br>
}]<br>
...</p>
<p>The expected model structure after instantiating this component is:</p>
<p>{<br>
forArrayToSetMembership: ["value1"],<br>
forIdentity: ["value2"],<br>
modelInTransit: {<br>
value1: true,<br>
forIdentity: ["value2"]<br>
}<br>
}</p>
<p>However, in the result model, the default value "value1" in the source array element "forArrayToSetMembership" for "fluid.transforms.arrayToSetMembership" disappears that causes the relay generates the wrong target model value that looks like:</p>
<p>{<br>
forArrayToSetMembership: [],<br>
forIdentity: ["value2"],<br>
modelInTransit: {<br>
value1: false,<br>
forIdentity: ["value2"]<br>
}<br>
}</p>
<p>To produce it, two things to pay attention:</p>
<p>1. The source array element for "fluid.transforms.arrayToSetMembership" has at least one array value;<br>
2. Must have at least another relay in the modelRelay option besides "fluid.transforms.arrayToSetMembership".</p>
<p>Note that once removing other relays from modelRelay option and having "fluid.transforms.arrayToSetMembership" as the only transformation in there, the relay works fine with keeping the source array value intact and creating the correct target model.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-15534">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2014-05-15T03:30:26.897-0400">2014-05-15T03:30:26.897-0400</relative-time></i></p>
                        <p>I've resolved this by providing a new facility for modelRelay governed by new fields "forward" and "backward" since the relay you have set up is ambiguous as it stands. Without a hint from the user the framework can't tell in which direction synchronisation is required. In the absence of the hint, the relay system is picking a sychronisation direction at random based on its condition when it encounters the relay.</p>

                    </li>
                    
                    <li id="comment-15536">
                        <p class="mb-0"><b>Cindy Li</b> <i>commented <relative-time datetime="2014-05-28T09:13:58.244-0400">2014-05-28T09:13:58.244-0400</relative-time></i></p>
                        <p>The pull request (<a href="https://github.com/fluid-project/infusion/pull/520">https://github.com/fluid-project/infusion/pull/520</a>) has been merged into the project repo @ f77fac2d2d8ecd7fe5ffd2f497cf404e8f13814b</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-5367/"><span class="aria-hidden">←</span> Previous: FLUID-5367</a>
        <a class="mx-1" href="/browse/FLUID-5369/">Next: FLUID-5369 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>