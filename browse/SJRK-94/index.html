<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> SJRK-94  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" SJRK-94 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/SJRK-94/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/SJRK-94/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/SJRK" data-pagefind-filter="project">Social Justice Repair Kit</a></li>
                <li><a href="/browse/SJRK-94/">SJRK-94</a></li>
            </ol>
        </nav>
        <h1>SJRK-94: Adding a block fails the first time</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/SJRK-94">SJRK-94</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/SJRK/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/SJRK/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>N/A</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/SJRK/?reporter=Gregor%20Moss">Gregor Moss</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2018-05-25T10:01:28.993-0400" prefix="">2018-05-25T10:01:28.993-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2018-05-25T17:05:45.828-0400" prefix="">2018-05-25T17:05:45.828-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Storytelling Tool UI</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>At the time of filing, in the <a href="/browse/SJRK-91/">SJRK-91</a> branch (<a href="https://karisma-stories.floeproject.org/storyEdit.html">https://karisma-stories.floeproject.org/storyEdit.html</a>), attempting to add a new block for the first time will fail without adding the block. Subsequent attempts to add a block will work just fine.</p>
<p>This does not occur in the "main" <a href="/browse/SJRK-49/">SJRK-49</a> branch (<a href="https://stories.floeproject.org/">https://stories.floeproject.org/</a>), so it is something which was added in as part of the rush to get it working for Karisma.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-26434">
                        <p class="mb-0"><b>Gregor Moss</b> <i>commented <relative-time datetime="2018-05-25T16:03:36.755-0400">2018-05-25T16:03:36.755-0400</relative-time></i></p>
                        <p>The issue seems to be occurring as a result of the page's uiLanguage value being changed when the block add buttons are being clicked. Additionally, something is setting the value to "undefined" after the initial creation, and this is likely the root cause of the issue.</p>

                    </li>
                    
                    <li id="comment-26435">
                        <p class="mb-0"><b>Gregor Moss</b> <i>commented <relative-time datetime="2018-05-25T17:05:45.825-0400">2018-05-25T17:05:45.825-0400</relative-time></i></p>
                        <p>The bug was cause by the page loading the language from the cookie, but if the cookie was not set then it would set the language to "undefined", triggering the editor DOM to be redrawn, removing any dynamically added elements before the context change could be registered</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/SJRK-93/"><span class="aria-hidden">←</span> Previous: SJRK-93</a>
        <a class="mx-1" href="/browse/SJRK-95/">Next: SJRK-95 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>