<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> SJRK-250  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" SJRK-250 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/SJRK-250/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/SJRK-250/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/SJRK" data-pagefind-filter="project">Social Justice Repair Kit</a></li>
                <li><a href="/browse/SJRK-250/">SJRK-250</a></li>
            </ol>
        </nav>
        <h1>SJRK-250: Text of some stories breaks outside of its container</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/SJRK-250">SJRK-250</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/SJRK/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Blocker</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>In Progress</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Gregor Moss</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/SJRK/?reporter=Gregor%20Moss">Gregor Moss</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2019-06-10T18:34:05.176-0400" prefix="">2019-06-10T18:34:05.176-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2020-04-21T11:42:08.678-0400" prefix="">2020-04-21T11:42:08.678-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Storytelling Tool UI</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Reported by Caren Watkins via email</p>
<p>"Hi Gregor, during a scan of the stories I noticed this odd rendering of a story from last Wednesday. The student did note in their critique of the tool that the copy was running "off screen" but I wasn't clear until I saw this:" [refer to attached image]</p>
<p>This has been noted before in stories captured earlier this year. Here are links to the stories currently exhibiting this behaviour:<br>
<a href="https://stories.floeproject.org/storyView.html?id=2fbf9d20-2a39-11e9-98f6-71413982cc35">https://stories.floeproject.org/storyView.html?id=2fbf9d20-2a39-11e9-98f6-71413982cc35</a><br>
<a href="https://stories.floeproject.org/storyView.html?id=2931a1f0-879b-11e9-b178-a79380bdbe47">https://stories.floeproject.org/storyView.html?id=2931a1f0-879b-11e9-b178-a79380bdbe47</a></p>
<p>Expected: all text to remain within the width of the site viewport, rendered in "p" elements</p>
<p>Actual: lines occasionally appear in monospace font, rendered in "pre" and "code" elements</p>

            </div>
            
            
            
            <div class="spacing-y-1">
                <h2>Attachments</h2>
                <ul class="spacing-y-1" role="list">
                    
                    <li>
                        <a href="https://idrc.cachefly.net/issues.fluidproject.org/SJRK/SJRK-250/2019-06-06 Storytelling Tool glitch.png">
                            
                                <img src="https://idrc.cachefly.net/issues.fluidproject.org/SJRK/SJRK-250/2019-06-06 Storytelling Tool glitch.png" alt="2019-06-06 Storytelling Tool glitch.png">
                            
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://idrc.cachefly.net/issues.fluidproject.org/SJRK/SJRK-250/2019-09-26 ST text overflow bug 1.png">
                            
                                <img src="https://idrc.cachefly.net/issues.fluidproject.org/SJRK/SJRK-250/2019-09-26 ST text overflow bug 1.png" alt="2019-09-26 ST text overflow bug 1.png">
                            
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://idrc.cachefly.net/issues.fluidproject.org/SJRK/SJRK-250/2019-09-26 ST text overflow bug 2.png">
                            
                                <img src="https://idrc.cachefly.net/issues.fluidproject.org/SJRK/SJRK-250/2019-09-26 ST text overflow bug 2.png" alt="2019-09-26 ST text overflow bug 2.png">
                            
                        </a>
                    </li>
                    
                </ul>
            </div>
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-26529">
                        <p class="mb-0"><b>Caren Watkins</b> <i>commented <relative-time datetime="2019-06-11T13:10:19.955-0400">2019-06-11T13:10:19.955-0400</relative-time></i></p>
                        <p>Based on observation and feedback this only happens when the paste function is used (but that could be incorrect). For example, if someone writes their story in a word doc or google doc then copies and pastes it into the tool.</p>

                    </li>
                    
                    <li id="comment-26530">
                        <p class="mb-0"><b>Gregor Moss</b> <i>commented <relative-time datetime="2019-09-26T22:00:38.354-0400">2019-09-26T22:00:38.354-0400</relative-time></i></p>
                        <p>Issue persists and is confirmed to occur in:<br>
macOS Chrome<br>
macOS Firefox<br>
iPhone 8 Safari</p>

                    </li>
                    
                    <li id="comment-26531">
                        <p class="mb-0"><b>Gregor Moss</b> <i>commented <relative-time datetime="2019-10-10T17:38:37.558-0400">2019-10-10T17:38:37.558-0400</relative-time></i></p>
                        <p>This appears to be caused by the fact that the text block view template makes use of the GPII-Handlebars Markdown helper: <a href="https://github.com/GPII/gpii-handlebars/blob/master/docs/mdHelper.md">https://github.com/GPII/gpii-handlebars/blob/master/docs/mdHelper.md</a><br>
The relevant line in the Storytelling Tool can be seen here: <a href="https://github.com/fluid-project/sjrk-story-telling/blob/a870c8afe9609a484f9005778039a0fe73974545/themes/base/templates/storyBlockTextView.handlebars#L4">https://github.com/fluid-project/sjrk-story-telling/blob/a870c8afe9609a484f9005778039a0fe73974545/themes/base/templates/storyBlockTextView.handlebars#L4</a></p>
<p>The issue can be reproduced by creating a new text block, adding content <strong>that contains line breaks</strong>, and then wrapping it in triple-backtick characters (```). In doing so, the Markdown renderer treats the text as a block of code and styles it accordingly, forcing no line wrapping.</p>
<p>Please also note the first paragraph, or whatever is immediately adjacent to the quotes, will not be rendered. This may be an issue in GPII-Handlebars, its underlying Markdown renderer, or it may be a symptom of misuse of the Markdown syntax (normally there would be a line break after the opening ```)</p>
<p>Possible solutions:</p>
<ol>
<li>Fix the database entries for the currently-affected stories and remove the offending characters from the text block content</li>
<li>Adding escaping code text block or storyEditor that separates any triple-backticks from content that immediately follows it</li>
<li>Remove the call to the md helper in the text block template, making it truly plain text but offering no escaping of any kind. Markdown support could then be added via implementing <a href="/browse/SJRK-172/">SJRK-172</a>.</li>
<li>Add a CSS rule to force wrapping for such lines<pre><code class="hljs language-css">pre <span class="hljs-selector-tag">code</span> {
    <span class="hljs-attribute">white-space</span>: pre-wrap;
}
</code></pre>
...or all of the above üôÇ</li>
</ol>
<p>A quick fix would be to add the CSS rule, and when time permits the stories currently affected can be manually adjusted. The affected story content should be corrected regardless, since it's possible that whole paragraphs are missing.</p>

                    </li>
                    
                    <li id="comment-26532">
                        <p class="mb-0"><b>Ned Zimmerman</b> <i>commented <relative-time datetime="2019-11-12T16:21:48.150-0500">2019-11-12T16:21:48.150-0500</relative-time></i></p>
                        <p>In chatting with Gregor and Justin today, we think this was likely caused by a user adding four spaces at the beginning of a line. This causes the same outcome as triple backticks and is more likely to happen by accident (intending to indent a line).</p>

                    </li>
                    
                    <li id="comment-26533">
                        <p class="mb-0"><b>Gregor Moss</b> <i>commented <relative-time datetime="2019-11-12T16:25:52.990-0500">2019-11-12T16:25:52.990-0500</relative-time></i></p>
                        <p>Building on Ned's comment just now, the same effect is achieved with a single tab character (	), aka HT</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/SJRK-249/"><span class="aria-hidden">‚Üê</span> Previous: SJRK-249</a>
        <a class="mx-1" href="/browse/SJRK-251/">Next: SJRK-251 <span class="aria-hidden">‚Üí</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>