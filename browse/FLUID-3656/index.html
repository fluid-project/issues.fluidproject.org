<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-3656  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-3656 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-3656/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-3656/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-3656/">FLUID-3656</a></li>
            </ol>
        </nav>
        <h1>FLUID-3656: Fluid Renderer does not apply proper workflow for uniquifying ids written to document</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-3656">FLUID-3656</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Anastasia Cheetham</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2010-05-18T01:18:45.829-0400" prefix="">2010-05-18T01:18:45.829-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2010-05-19T11:25:14.888-0400" prefix="">2010-05-19T11:25:14.888-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.2</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.3</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Reorderer</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>The renderer contains code and workflow for inspecting the "upcoming document" to assure that ids written into the markup do not conflict with ids that are already there. However, the workflow for this function does not interact correctly with the "autobind" feature which directs changes from form controls onto the model. This is particularly noticeable if the renderer is used to render instances of the same component multiple times into the document. Manual test case at <br>
<a href="http://source.fluidproject.org/svn/scratchpad/multiple-renderers">http://source.fluidproject.org/svn/scratchpad/multiple-renderers</a></p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-22400">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2010-05-18T02:05:46.508-0400">2010-05-18T02:05:46.508-0400</relative-time></i></p>
                        <p>This is quite a complex bug since the workflow for the various "identifiers" applied to components at the markup and component level is quite intricate. Although the actual ids written to the document are indeed unique, these are not determined "in time" to be available to the autobind workflow. This is somewhat awkward - since this workflow was only ever placed INSIDE the renderer so that it could provoke the allocation of ids before they hit the markup. Further intricacies involve the relationship between "submitting names" and ids. Autobind identifies components both through "submitting names" (which follow HTML rules for uniqueness within forms and also for radio button/selection scoping) in order to bind to data, but also though necessarily globally unique ids to actually bind event handlers. <br>
There are various points within the renderer workflow in which it can be "realised" that an outputting component requires an id. ids are assigned "initially" only to elements which had ids already in the markup - however, discovering a decorator (including autobind) attached to an element "forces" allocation of the id. However, the "changed id" is not seen in time, within the event handler created within the renderer to respond to change events. It was initially thought that this bug might have been caused by the old chestnut of confusion in getElementById() which might sometimes return elements by matching NAME rather than ID but this is probably a red herring - that bug is probably only seen in IE6-era browsers.</p>

                    </li>
                    
                    <li id="comment-22404">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2010-05-19T03:18:37.446-0400">2010-05-19T03:18:37.446-0400</relative-time></i></p>
                        <p>Fixed at revision 9881. Significant reworking of the id assignment workflow and creation of new tree annotation "finalID. Do note that because of this and various other renderer-initiated tree modifications, component trees are not reusable across invocations of the renderer, but need to be copied or regenerated afresh.</p>

                    </li>
                    
                    <li id="comment-22407">
                        <p class="mb-0"><b>Anastasia Cheetham</b> <i>commented <relative-time datetime="2010-05-19T11:25:14.886-0400">2010-05-19T11:25:14.886-0400</relative-time></i></p>
                        <p>I have tested this fix in the CollectionSpace context where the problem was found, and it definitely works. FYI, a branch has been created at r9881 for CSpace to use: <a href="http://source.fluidproject.org/svn/fluid/infusion/tags/infusion-1.2.x-collectionspace-0.7alpha/">http://source.fluidproject.org/svn/fluid/infusion/tags/infusion-1.2.x-collectionspace-0.7alpha/</a></p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-3655/"><span class="aria-hidden">←</span> Previous: FLUID-3655</a>
        <a class="mx-1" href="/browse/FLUID-3657/">Next: FLUID-3657 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>