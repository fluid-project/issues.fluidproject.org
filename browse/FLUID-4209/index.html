<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-4209  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-4209 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-4209/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-4209/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-4209/">FLUID-4209</a></li>
            </ol>
        </nav>
        <h1>FLUID-4209: Replace rsf:ids in template of the table of contents component with flc classes</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-4209">FLUID-4209</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Task">Task</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Justin Obara</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Cindy%20Li">Cindy Li</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2011-05-09T11:19:12.537-0400" prefix="">2011-05-09T11:19:12.537-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2011-07-25T15:12:03.602-0400" prefix="">2011-07-25T15:12:03.602-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.4</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Table of Contents</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>To utilize the current framework feature, replace all the rsf:ids in template of table of contents component with flc classes</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-23721">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2011-05-17T10:08:06.281-0400">2011-05-17T10:08:06.281-0400</relative-time></i></p>
                        <p>Bug Parade Infusion</p>

                    </li>
                    
                    <li id="comment-23724">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2011-06-30T10:11:16.152-0400">2011-06-30T10:11:16.152-0400</relative-time></i></p>
                        <p>After some discussion with Justin and James.  We are going to add a new model into tableOfContents.modelBuilder.  This new model ignore skipped headings, and indent the headings incrementally, as shown belown</p>
<p>original model:<br>
h1<br>
h2<br>
h3<br>
h6<br>
h5<br>
h4</p>
<p>new model<br>
h1<br>
h2<br>
h3<br>
h6<br>
h5<br>
h4</p>
<p>The new model's "levels" does not depend on the heading's level.  I found the second model more "usable" than the first one in terms of table of contents.  The original model with random headings is more scattered and "harder to click".  </p>

                    </li>
                    
                    <li id="comment-23727">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2011-07-04T14:01:48.710-0400">2011-07-04T14:01:48.710-0400</relative-time></i></p>
                        <p>We have added two functions to generate the model, namely, gradualModelLevelFn, skippedModelLevelFn.  These function are passed into the modelBuilder.defaults as part of the invoker, which allow users to specify the desired model type to be used for this table of content.</p>

                    </li>
                    
                    <li id="comment-23731">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2011-07-04T15:27:35.570-0400">2011-07-04T15:27:35.570-0400</relative-time></i></p>
                        <p>Test results:<br>
IE7: Fails on all "anchor set correctly", ie. the expected is "#h1", but actual is "<a href="http://url/#h1">http://url#h1</a>". Problem lies in elm.attr('href'):<br>
jqUnit.assertEquals("ToC anchor set correctly", fluid.get(hInfo, "url"), elm.attr("href"));</p>
<p>FF5: running standalone demo and component tests under file system (ie. file:///Users/lala/fluid/src/webapp/standalone-demos/table-of-contents/html/TableOfContents.html) gives the following error:<br>
Mon Jul 04 2011 15:26:01 <a href="/browse/GMT-0400/">GMT-0400</a> (EDT): ASSERTION FAILED: empty template supplied to fluid.parseTemplate</p>

                    </li>
                    
                    <li id="comment-23735">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2011-07-04T16:55:16.749-0400">2011-07-04T16:55:16.749-0400</relative-time></i></p>
                        <p>The above FF5 problem is about:config, security.fileuri.strict.origin problem, set it to false and it will run <a href="http://kb.mozillazine.org/Security.fileuri.strict_origin_policy">http://kb.mozillazine.org/Security.fileuri.strict_origin_policy</a></p>

                    </li>
                    
                    <li id="comment-23738">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2011-07-05T10:08:54.822-0400">2011-07-05T10:08:54.822-0400</relative-time></i></p>
                        <p>Regarding to IE7 attr('href') returning the full path instead of the relative link.  It seems like jQuery is aware of this issue and there is no obvious fix: <a href="http://bugs.jquery.com/ticket/7117">http://bugs.jquery.com/ticket/7117</a><br>
"It appears that only &lt;a&gt; elements generated programmatically using strings exhibit this problem. Elements that are generated like $('&lt;a&gt;', { href: '#foo' }) work properly, as do elements that existed in the document when it was loaded.</p>
<p>Short of scanning all strings passed to jQuery and html for anchors and manually resetting their attributes, there is almost certainly no way that jQuery can work around this issue, as IE is irreparably modifying the href property when building elements from strings. You can see this by inspecting the generated markup (the href attribute magically becomes absolute). As a result, this is probably only going to be a documentation fix. "</p>

                    </li>
                    
                    <li id="comment-23741">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2011-07-05T11:08:29.179-0400">2011-07-05T11:08:29.179-0400</relative-time></i></p>
                        <p>A work around is to use the "hash" property from the "a" element.  ie. $(elm)[0].hash.<br>
According to <a href="https://developer.mozilla.org/en/DOM/window.location">https://developer.mozilla.org/en/DOM/window.location</a>, hash is "the part of the URL that follows the # symbol, including the # symbol."  In the table of content tests, we may use the hashes, which is LEQV to the relative URL in this case.</p>

                    </li>
                    
                    <li id="comment-23744">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2011-07-05T16:49:26.688-0400">2011-07-05T16:49:26.688-0400</relative-time></i></p>
                        <p>The use of .hash doesn't fix the "root of the problem" since the href is still appeared to be a full URL on IE7.  I have ran a few more <strong>quick</strong> tests to nail down the problem, as follow (will put them into unit test format if required):</p>
<p>To reproduce, run the following on IE7: <br>
&lt;div class=".container"&gt;&lt;/div&gt;<br>
$('.container').html('&lt;a class="link2" href="#foo"&gt;Test Link2&lt;/a&gt;')<br>
console.log($('.link2').attr('href'));  //expected "#foo", actual "<a href="http://domain/#foo">http://domain/#foo</a>"</p>
<p>It seems like crafting &lt;a href&gt; with .html() will cause IE7 to print out the entire URL, (IE8, 9, Chrome, FF are fine).</p>
<p>The next question is what is generating the "&lt;a href&gt;"?  The answer is the renderer.  I looked into the framework/renderer/js/fluidRenderer.js and saw the following:<br>
line 1491~1496:<br>
1491        if ($.browser.msie) {<br>
1492            $(node).html(rendered);<br>
1493        }<br>
1494        else {<br>
1495            node.innerHTML = rendered;<br>
1496        }</p>
<p>If we are running IE7, we will execute line 1492 and the problem I mentioned above will occur.  I tried replacing line 1492 with line 1495, the href is still generated with a full URL.  This could be something that is on the IE7 parser which jQuery cannot fix (<a href="http://bugs.jquery.com/ticket/7117">http://bugs.jquery.com/ticket/7117</a>).</p>

                    </li>
                    
                    <li id="comment-23747">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2011-07-19T12:21:57.194-0400">2011-07-19T12:21:57.194-0400</relative-time></i></p>
                        <p>There is a minor display problem with IE7, described here #<a href="/browse/FLUID-4346/">FLUID-4346</a></p>

                    </li>
                    
                    <li id="comment-23749">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2011-07-25T15:12:03.599-0400">2011-07-25T15:12:03.599-0400</relative-time></i></p>
                        <p>Was merged into the project repo at 6d6c5ddc4ac62499c026c9d61430459eb73d2e94 ( <a href="https://github.com/fluid-project/infusion/pull/111">https://github.com/fluid-project/infusion/pull/111</a> )</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-4208/"><span class="aria-hidden">←</span> Previous: FLUID-4208</a>
        <a class="mx-1" href="/browse/FLUID-4210/">Next: FLUID-4210 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>