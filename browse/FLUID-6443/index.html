<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-6443  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-6443 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-6443/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-6443/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-6443/">FLUID-6443</a></li>
            </ol>
        </nav>
        <h1>FLUID-6443: Support dynamic re-localization of prefs framework components</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-6443">FLUID-6443</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Improvement">Improvement</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Open</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>N/A</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Justin%20Obara">Justin Obara</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2019-12-18T13:49:06.651-0500" prefix="">2019-12-18T13:49:06.651-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2020-01-13T15:30:08.702-0500" prefix="">2020-01-13T15:30:08.702-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Prefs Framework</li>
                            
                            <li>UI Options</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>This requires the changes from the <a href="/browse/FLUID-6148/">FLUID-6148</a> line of work, and should likely also wait on the <a href="/browse/FLUID-6420/">FLUID-6420</a> work to before implementing.<br>
&#160;<br>
Suggestion from Antranig in the [fluid-work channel today|<a href="http://irc-logs.fluidproject.org/%23fluid-work/%23fluid-work.2019-12-18.log">http://irc-logs.fluidproject.org/%23fluid-work/%23fluid-work.2019-12-18.log</a>:]<br>
&#160;<br>
Right now there are two ways of using ResourceLoader resources - the "dynamic path" involves referring to them regardless of whether they have loaded, via a model reference or a messageResolver reference, etc.<br>
&#160;<br>
And the "static path" involves the pattern that we generally use in UIO since its usage of ResourceLoaders is based on the legacy system, whereby you explicitly wait for the onResourcesLoaded event to fire<br>
&#160;<br>
In the static path you simply get the value of the resource as it has loaded and don't get the benefit of any dynamic updates<br>
&#160;<br>
So every UIO panel has one of these attached: <a href="https://github.com/fluid-project/infusion/blob/master/src/framework/preferences/js/Panels.js#L74">https://github.com/fluid-project/infusion/blob/master/src/framework/preferences/js/Panels.js#L74</a><br>
&#160;<br>
It gets its "messageBase" via this distribution: <a href="https://github.com/fluid-project/infusion/blob/master/src/framework/preferences/js/Panels.js#L82">https://github.com/fluid-project/infusion/blob/master/src/framework/preferences/js/Panels.js#L82</a><br>
&#160;<br>
Now all of these messageBase values get baked into the component via the AuxBuilder here: <a href="https://github.com/amb26/infusion/blob/FLUID-6145/src/framework/preferences/js/AuxBuilder.js#L474">https://github.com/amb26/infusion/blob/FLUID-6145/src/framework/preferences/js/AuxBuilder.js#L474</a><br>
&#160;<br>
Although there seems to be some confusion here since it looks like these panels separately inherit directly from the parent bundle via the prefsEditorConnections grade: <a href="https://github.com/fluid-project/infusion/blob/master/src/framework/preferences/js/Panels.js#L655">https://github.com/fluid-project/infusion/blob/master/src/framework/preferences/js/Panels.js#L655</a><br>
&#160;<br>
I think the best thing to do would be to hoist an actual test case demonstrating relocalisation into the core framework, which would then be more than a "demo" : p<br>
&#160;<br>
My suspicion that the best way of fixing this is to improve the strategy in the AuxBuilder which implies some core work by Justin_o<br>
&#160;<br>
Probably the most direct approach is to create a kind of "dynamic path" cut-through that resolves the root message bundle dynamically and early, and then rewire all the references to bind into that, so that even if the current rendering model makes the components look as if they have to wait for the I/O to finish, they can bind to another component that doesn't<br>
&#160;<br>
This involves the least upheaval, I think, and lets us keep our existing clunky "strings" model that the old renderer relies on</p>

            </div>
            
            
            
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-6442/"><span class="aria-hidden">←</span> Previous: FLUID-6442</a>
        <a class="mx-1" href="/browse/FLUID-6444/">Next: FLUID-6444 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>