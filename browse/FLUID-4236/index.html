<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-4236  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-4236 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-4236/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-4236/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-4236/">FLUID-4236</a></li>
            </ol>
        </nav>
        <h1>FLUID-4236: Merge semantics between renderer decorator-contributed options and demands block-contributed options are unclear</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-4236">FLUID-4236</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Justin Obara</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2011-05-13T20:22:01.172-0400" prefix="">2011-05-13T20:22:01.172-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2014-03-03T13:08:18.137-0500" prefix="">2014-03-03T13:08:18.137-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.4</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.5</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>IoC System</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Accepted a test case from JURA which attempts to issue options BOTH from a renderer decorator </p>
<p>mergeComponent: {<br>
decorators: {<br>
type: "fluid",<br>
func: "fluid.tests.mergeComponent",<br>
options: {<br>
option: "OPTION1"<br>
}<br>
}<br>
}</p>
<p>and ALSO a demands block:</p>
<p>fluid.demands("fluid.tests.mergeComponent", "fluid.tests.mergeRenderParent", {<br>
container: "{arguments}.0",<br>
options: {<br>
model: "{mergeRenderParent}.model"<br>
}<br>
});</p>
<p>The effect with the current framework is that the demands block material wins and the decorator material is discarded completely.</p>
<p>I gave this response:</p>
<p>Thanks JURA... this one is not "clearly" a bug - in that resolution behaviour between renderer decorator options and demanded options was never clear. In particular, demands options generally have the status of "user options" so the situation is as if the user supplied some direct arguments to some component which was then also hit by a demands block... which is of course impossible, since the user would have had to call the function directly and not via IoC üòõ So this behaviour is currently undefined. </p>
<p>Whilst these semantics are currently not completely clarified, the desired behaviour can be had using the following "mergeAllOptions" directive. This is able to refer literally to the 2nd argument supplied by the fluid decorator instantiator and hence insert it into the proper position in the merge stack. This is probably not bad since it is best for the user to be clear in this case anyway, since it is not clear which of the two options blocks should be merged first. </p>
<p>fluid.demands("fluid.tests.mergeComponent", "fluid.tests.mergeRenderParent", {<br>
container: "{arguments}.0",<br>
mergeAllOptions: [{<br>
model: "{mergeRenderParent}.model"<br>
}, "{arguments}.1"]<br>
});</p>
<p>However, it SHOULD perhaps be possible to refer to the decorator's options as "{options}" which is not currently possible. This reference is potentially ambiguous - however, in the case of a renderer decorator, the other referent of "{options}" which is a subcomponent's direct options supplied in a "defaults" block is not possible, and so it is reasonable to be able to expect to reuse the "{options}" slot for this purpose. This runs the risk of regressing on the "quick fix" to <a href="/browse/FLUID-4195/">FLUID-4195</a>, where we ensured that model material was not copied when it passed through the renderer decorator pipeline by positioning ALL of it as "direct arguments" in this way.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-14467">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2013-02-19T14:52:45.346-0500">2013-02-19T14:52:45.346-0500</relative-time></i></p>
                        <p>Resolved by merge of <a href="/browse/FLUID-4330/">FLUID-4330</a> branch at revision 91d5d1</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-4235/"><span class="aria-hidden">‚Üê</span> Previous: FLUID-4235</a>
        <a class="mx-1" href="/browse/FLUID-4237/">Next: FLUID-4237 <span class="aria-hidden">‚Üí</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>