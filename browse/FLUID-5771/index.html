<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-5771  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-5771 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-5771/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-5771/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-5771/">FLUID-5771</a></li>
            </ol>
        </nav>
        <h1>FLUID-5771: Can no longer use distributeOptions with components....</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-5771">FLUID-5771</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Blocker</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Colin Clark</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Tony%20Atkins%20%5BRtF%5D">Tony Atkins [RtF]</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2015-09-25T05:39:11.597-0400" prefix="">2015-09-25T05:39:11.597-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2024-07-22T09:31:13.854-0400" prefix="">2024-07-22T09:31:13.854-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Framework</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Previously, in discussion with Antranig I used `distributeOptions` to replace the renderer in each child component with a single renderer provided by a parent grade.  This relied on syntax like:</p>
<pre><code class="hljs language-java">distributeOptions: {
  source: <span class="hljs-string">"{that}.componentName"</span>,
  target:  <span class="hljs-string">"{that}.components.componentName"</span>
}
</code></pre>
<p>This syntax no longer works.  In attempting to work around the problem, I assume that storing a reference to the component in the options and then distributing that would work.  The only side effect would be that calls to the component would need to be prefixed with `options`.  Here is an example of this approach: </p>
<pre><code class="hljs language-java"><span class="hljs-comment">// Demonstration of very bad bug in `distributeOptions` when attempting to distribute references to components.</span>
fluid.defaults(<span class="hljs-string">"fluid.sandbox.override.marker"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.component"</span>]
});

fluid.defaults(<span class="hljs-string">"fluid.sandbox.override.waterfall"</span>, {
    gradeNames:      [<span class="hljs-string">"fluid.component"</span>],
    value:           <span class="hljs-string">"parent"</span>,
    myComponent:     <span class="hljs-string">"{that}.myComponent"</span>,
    distributeOptions: [
        {
            source: <span class="hljs-string">"{that}.options.value"</span>,
            target: <span class="hljs-string">"{that fluid.sandbox.override.marker}.options.value"</span>
        },
        {
            source: <span class="hljs-string">"{that}.options.myComponent"</span>,
            target: <span class="hljs-string">"{that fluid.sandbox.override.marker}.options.myComponent"</span>
        }
    ],
    components: {
        myComponent: {
            type: <span class="hljs-string">"fluid.component"</span>,
            options: {
                value: <span class="hljs-string">"parent"</span>
            }
        },
        child: {
            type: <span class="hljs-string">"fluid.sandbox.override.marker"</span>,
            options: {
                value: <span class="hljs-string">"child"</span>,
                myComponent: <span class="hljs-string">"{that}.myComponent"</span>,
                components: {
                    myComponent: {
                        type: <span class="hljs-string">"fluid.component"</span>,
                        options: {
                            value: <span class="hljs-string">"child"</span>
                        }
                    },
                    grandChild: {
                        type: <span class="hljs-string">"fluid.sandbox.override.marker"</span>,
                        options: {
                            value: <span class="hljs-string">"grandchild"</span>,
                            myComponent:  <span class="hljs-string">"{that}.myComponent"</span>,
                            components: {
                                myComponent: {
                                    type: <span class="hljs-string">"fluid.component"</span>,
                                    options: {
                                        value: <span class="hljs-string">"grandchild"</span>
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
});
</code></pre>
<p>I opened this ticket because in this specific circumstance, distributeOptions works <strong>in reverse</strong>.  The target value is propagated backwards to all recipients.   See the console output below:</p>
<pre><code class="hljs language-java">waterfall.child.grandChild.options.value
<span class="hljs-string">"parent"</span>

waterfall.child.grandChild.options.myComponent.options.value
<span class="hljs-string">"grandchild"</span>

waterfall.child.options.myComponent.options.value
<span class="hljs-string">"grandchild"</span>

waterfall.options.myComponent.options.value
<span class="hljs-string">"grandchild"</span>
</code></pre>
<p>It seems very much counter to the normal operation of `distributeOptions` for information to propagate back from the target to the source, and especially bad for it to hit intermediate targets on the way.</p>
<p>The lack of working component propagation has badly broken gpii-handlebars and is completely blocking my work to be delivered for the face to face.  I will work on a workaround, but would appreciate help with some urgency.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-24317">
                        <p class="mb-0"><b>Tony Atkins [RtF]</b> <i>commented <relative-time datetime="2015-09-25T05:41:32.143-0400">2015-09-25T05:41:32.143-0400</relative-time></i></p>
                        <p>I haven't used this JIRA instance in a while and wanted to point out two things:</p>
<p>1.  The wiki markup rendering on this instance is broken, but you should still be able to copy and paste the sample code to see what I mean.<br>
2. At mentions are broken (likely a user permissions problem), so I'll have to share this with Antranig manually.</p>

                    </li>
                    
                    <li id="comment-24318">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2015-09-25T07:31:12.158-0400">2015-09-25T07:31:12.158-0400</relative-time></i></p>
                        <p>I am in meetings all day today and can't give this issue serious attention before tomorrow. However, my first response to the configuration above notes these:</p>
<p>i) a target of "{that}.components.componentName" would always be invalid - "components" are part of options, not top level material so I can't believe this ever worked. It would have been {that}.options.components.componentName if anything but this still seems meaningless since the effect could only be to construct a fresh, empty component named "componentName". I believe what you might be trying to achieve could be achieved by a target of {that componentName}.options.type - but I can't easily understand what is required here.</p>
<p>It would help enormously rather than constructing placeholders and examples you could paste me a direct link in github to the project where you use a construction like this because I can't grasp what you are trying to do from the description here.</p>
<p>As for your later example, your attempt to store an entire component in "options" doesn't desmonstrate what you say - nothing is being propagated from target to source, there is just confusion resulting from which component the reference options.myComponent actually resolves to when all the component options are resolved. But components must never be stored in "options", the results from this are always meaningless. I will raise a JIRA for future versions of the framework to signal an error diagnostic in this situation.</p>
<p>The only place that references to components can validly be stored in an IoC tree are in the "components" section. - e.g.</p>
<p>fluid.defaults("my.thing", {<br>
components: {<br>
myReference: "{context}.someOtherComponent"<br>
}<br>
});</p>
<p>Your reference of myComponent: "{that}.myComponent",  is unworkable and if it results in anything, will doubtless just corrupt the component in place during the options merging phase for the parent component. In future I will also ensure to make component options immutable so that early diagnostics result from this.</p>

                    </li>
                    
                    <li id="comment-24321">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2015-09-25T07:54:55.111-0400">2015-09-25T07:54:55.111-0400</relative-time></i></p>
                        <p>The actual reference is at <a href="https://github.com/the-t-in-rtf/gpii-handlebars/blob/GPII-1284/src/js/client/templateManager.js#L29">https://github.com/the-t-in-rtf/gpii-handlebars/blob/GPII-1284/src/js/client/templateManager.js#L29</a></p>

                    </li>
                    
                    <li id="comment-24322">
                        <p class="mb-0"><b>Tony Atkins [RtF]</b> <i>commented <relative-time datetime="2015-09-25T08:28:30.303-0400">2015-09-25T08:28:30.303-0400</relative-time></i></p>
                        <p>The use case should have been very familiar, we worked on this repeatedly together.  Regardless, to summarize, I want to inject a single instance of a component into a child component, so that all the child components of a container element that require a renderer use a single renderer which is initialized before the child components are created.</p>
<p>All of the above were some (but not all) of my attempts to simply inject a component into a child component.</p>

                    </li>
                    
                    <li id="comment-24324">
                        <p class="mb-0"><b>Tony Atkins [RtF]</b> <i>commented <relative-time datetime="2015-09-25T10:01:31.791-0400">2015-09-25T10:01:31.791-0400</relative-time></i></p>
                        <p>I cannot edit this issue, IMO it should be repurposed or closed in favor of an issue to detect and reject attempts to distribute components directly.</p>
<p>I ended up meeting the use case by defining and distributing invokers that had access to the component.  You can see the results here:</p>
<p><a href="https://github.com/GPII/gpii-handlebars/pull/13">https://github.com/GPII/gpii-handlebars/pull/13</a></p>

                    </li>
                    
                    <li id="comment-24326">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2015-09-25T12:53:23.510-0400">2015-09-25T12:53:23.510-0400</relative-time></i></p>
                        <p>Thanks for the report, Tony Atkins [RtF] - the use case was familiar, but I couldn't easily identify which of the many use cases that we have covered it was from the description here. I will split this issue into several other JIRAs covering the various usability issues we've uncovered trying to recover this functionality, in particular - <br>
i) It should be impossible to inject a component into another component's options at a general position (that is, to a position other than options.components.*)<br>
ii) It should be impossible to corrupt a component's options by modifying them after construction</p>
<p>regardless of these usability issues, the original use case should be properly expressible in the framework by distributing a component reference to {context}.options.components.name - if this doesn't work it should be fixed</p>

                    </li>
                    
                    <li id="comment-24328">
                        <p class="mb-0"><b>Tony Atkins [RtF]</b> <i>commented <relative-time datetime="2015-09-25T14:23:04.704-0400">2015-09-25T14:23:04.704-0400</relative-time></i></p>
                        <p>Here is the error when inserting an existing component into another component's options.components:</p>
<pre><code class="hljs language-java"><span class="hljs-comment">// Demonstration of very bad bug in `distributeOptions` when attempting to distribute references to components.</span>
fluid.defaults(<span class="hljs-string">"fluid.sandbox.override.marker"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.component"</span>]
});

fluid.defaults(<span class="hljs-string">"fluid.sandbox.override.demo"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.component"</span>],
    distributeOptions: {
        source: <span class="hljs-string">"{that}.options.components.toDistribute"</span>,
        <span class="hljs-comment">//source: "{that}.toDistribute",</span>
        target: <span class="hljs-string">"{that fluid.sandbox.override.marker}.options.components.toDistribute"</span>
    },
    components: {
        toDistribute: {
            type: <span class="hljs-string">"fluid.component"</span>
        },
        toReceive: {
            type: <span class="hljs-string">"fluid.sandbox.override.marker"</span>
        }
    }
});

<span class="hljs-type">var</span> <span class="hljs-variable">demo</span> <span class="hljs-operator">=</span> fluid.sandbox.override.demo();
console.log(<span class="hljs-string">"outer: "</span>, demo.toDistribute.typeName, demo.toDistribute.id);
console.log(<span class="hljs-string">"distributed:"</span>, demo.toReceive.toDistribute.typeName, demo.toReceive.toDistribute.id);
</code></pre>
<p>This results in the following stack trace:</p>
<pre><code class="hljs language-java">/usr/local/bin/node override.js
<span class="hljs-number">19</span>:<span class="hljs-number">37</span>:<span class="hljs-number">41.621</span>:  Registering <span class="hljs-keyword">module</span> infusion from path /Users/duhrer/Source/rtf/fluid-sandbox.local/node_modules/infusion
<span class="hljs-number">19</span>:<span class="hljs-number">37</span>:<span class="hljs-number">41.639</span>:  ASSERTION FAILED: Unrecognised material in place of subcomponent toDistribute - no <span class="hljs-string">"type"</span> field found
<span class="hljs-number">19</span>:<span class="hljs-number">37</span>:<span class="hljs-number">41.639</span>:  Current activity: 
    <span class="hljs-keyword">while</span> instantiating dependent component with name <span class="hljs-string">"toDistribute"</span> with record {
    <span class="hljs-string">"components"</span>: {
        <span class="hljs-string">"toDistribute"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.component"</span>
        },
        <span class="hljs-string">"toReceive"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.sandbox.override.marker"</span>
        }
    },
    <span class="hljs-string">"events"</span>: {
        <span class="hljs-string">"onCreate"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-string">"onDestroy"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-string">"afterDestroy"</span>: <span class="hljs-literal">null</span>
    }
} as child of {
    <span class="hljs-string">"typeName"</span>: <span class="hljs-string">"fluid.sandbox.override.marker"</span>,
    <span class="hljs-string">"id"</span>: <span class="hljs-string">"107jvqtm-26"</span>,
    <span class="hljs-string">"lifecycleStatus"</span>: <span class="hljs-string">"constructing"</span>,
    <span class="hljs-string">"destroy"</span>: { Function
        
    },
    <span class="hljs-string">"options"</span>: {
        <span class="hljs-string">"gradeNames"</span>: [
            <span class="hljs-string">"fluid.sandbox.override.marker"</span>,
            <span class="hljs-string">"fluid.component"</span>
        ],
        <span class="hljs-string">"components"</span>: {
            <span class="hljs-string">"toDistribute"</span>: {
                <span class="hljs-string">"components"</span>: {
                    <span class="hljs-string">"toDistribute"</span>: {
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.component"</span>
                    },
                    <span class="hljs-string">"toReceive"</span>: {
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.sandbox.override.marker"</span>
                    }
                },
                <span class="hljs-string">"events"</span>: {
                    <span class="hljs-string">"onCreate"</span>: <span class="hljs-literal">null</span>,
                    <span class="hljs-string">"onDestroy"</span>: <span class="hljs-literal">null</span>,
                    <span class="hljs-string">"afterDestroy"</span>: <span class="hljs-literal">null</span>
                }
            }
        },
        <span class="hljs-string">"initFunction"</span>: <span class="hljs-string">"fluid.initLittleComponent"</span>,
        <span class="hljs-string">"argumentMap"</span>: {
            <span class="hljs-string">"options"</span>: <span class="hljs-number">0</span>
        },
        <span class="hljs-string">"events"</span>: {
            <span class="hljs-string">"onCreate"</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-string">"onDestroy"</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-string">"afterD .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]
    while instantiating dependent components for component {
    "</span>typeName<span class="hljs-string">": "</span>fluid.sandbox.override.marker<span class="hljs-string">",
    "</span>id<span class="hljs-string">": "</span>107jvqtm-<span class="hljs-number">26</span><span class="hljs-string">",
    "</span>lifecycleStatus<span class="hljs-string">": "</span>constructing<span class="hljs-string">",
    "</span>destroy<span class="hljs-string">": { Function
        
    },
    "</span>options<span class="hljs-string">": {
        "</span>gradeNames<span class="hljs-string">": [
            "</span>fluid.sandbox.override.marker<span class="hljs-string">",
            "</span>fluid.component<span class="hljs-string">"
        ],
        "</span>components<span class="hljs-string">": {
            "</span>toDistribute<span class="hljs-string">": {
                "</span>components<span class="hljs-string">": {
                    "</span>toDistribute<span class="hljs-string">": {
                        "</span>type<span class="hljs-string">": "</span>fluid.component<span class="hljs-string">"
                    },
                    "</span>toReceive<span class="hljs-string">": {
                        "</span>type<span class="hljs-string">": "</span>fluid.sandbox.override.marker<span class="hljs-string">"
                    }
                },
                "</span>events<span class="hljs-string">": {
                    "</span>onCreate<span class="hljs-string">": null,
                    "</span>onDestroy<span class="hljs-string">": null,
                    "</span>afterDestroy<span class="hljs-string">": null
                }
            }
        },
        "</span>initFunction<span class="hljs-string">": "</span>fluid.initLittleComponent<span class="hljs-string">",
        "</span>argumentMap<span class="hljs-string">": {
            "</span>options<span class="hljs-string">": 0
        },
        "</span>events<span class="hljs-string">": {
            "</span>onCreate<span class="hljs-string">": null,
            "</span>onDestroy<span class="hljs-string">": null,
            "</span>afterD .... [output suppressed at <span class="hljs-number">1024</span> chars - <span class="hljs-keyword">for</span> more output, increase fluid.logObjectRenderChars]
    <span class="hljs-keyword">while</span> constructing component of type fluid.sandbox.override.marker with arguments {
    <span class="hljs-string">"0"</span>: {
        <span class="hljs-string">"marker"</span>: {
            <span class="hljs-string">"value"</span>: <span class="hljs-string">"EXPAND"</span>
        },
        <span class="hljs-string">"localRecord"</span>: undefined,
        <span class="hljs-string">"mergeRecords"</span>: {
            <span class="hljs-string">"distributions"</span>: [
                {
                    <span class="hljs-string">"options"</span>: {
                        <span class="hljs-string">"components"</span>: {
                            <span class="hljs-string">"toDistribute"</span>: {
                                <span class="hljs-string">"components"</span>: {
                                    <span class="hljs-string">"toDistribute"</span>: {
                                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.component"</span>
                                    },
                                    <span class="hljs-string">"toReceive"</span>: {
                                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.sandbox.override.marker"</span>
                                    }
                                },
                                <span class="hljs-string">"events"</span>: {
                                    <span class="hljs-string">"onCreate"</span>: <span class="hljs-literal">null</span>,
                                    <span class="hljs-string">"onDestroy"</span>: <span class="hljs-literal">null</span>,
                                    <span class="hljs-string">"afterDestroy"</span>: <span class="hljs-literal">null</span>
                                }
                            },
                            <span class="hljs-string">"modelRe .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]
    while instantiating dependent component with name "</span>toReceive<span class="hljs-string">" with record {
    "</span>type<span class="hljs-string">": "</span>fluid.sandbox.override.marker<span class="hljs-string">"
} as child of {
    "</span>typeName<span class="hljs-string">": "</span>fluid.sandbox.override.demo<span class="hljs-string">",
    "</span>id<span class="hljs-string">": "</span>107jvqtm-<span class="hljs-number">17</span><span class="hljs-string">",
    "</span>lifecycleStatus<span class="hljs-string">": "</span>constructing<span class="hljs-string">",
    "</span>destroy<span class="hljs-string">": { Function
        
    },
    "</span>options<span class="hljs-string">": {
        "</span>gradeNames<span class="hljs-string">": [
            "</span>fluid.sandbox.override.demo<span class="hljs-string">",
            "</span>fluid.component<span class="hljs-string">"
        ],
        "</span>distributeOptions<span class="hljs-string">": {
            "</span>no-namespace-distribution-107jvqtm-<span class="hljs-number">16</span><span class="hljs-string">": {
                "</span>source<span class="hljs-string">": "</span>{that}.toDistribute<span class="hljs-string">",
                "</span>target<span class="hljs-string">": "</span>{that fluid.sandbox.override.marker}.options.components.toDistribute<span class="hljs-string">",
                "</span>namespace<span class="hljs-string">": "</span>no-namespace-distribution-107jvqtm-<span class="hljs-number">16</span><span class="hljs-string">"
            }
        },
        "</span>argumentMap<span class="hljs-string">": {
            "</span>options<span class="hljs-string">": 0
        },
        "</span>initFunction<span class="hljs-string">": "</span>fluid.initLittleComponent<span class="hljs-string">",
        "</span>components<span class="hljs-string">": {
            "</span>toDistribute<span class="hljs-string">": {
                "</span>type<span class="hljs-string">": "</span>fluid.component<span class="hljs-string">"
            },
            "</span>toReceive<span class="hljs-string">": {
                "</span>type<span class="hljs-string">": "</span>fluid.sandbox.override.marker<span class="hljs-string">"
            }
        },
        "</span>events<span class="hljs-string">": {
            "</span>onCreate<span class="hljs-string">": null,
            "</span>onDestroy<span class="hljs-string">": null,
    .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]
    while instantiating dependent components for component {
    "</span>typeName<span class="hljs-string">": "</span>fluid.sandbox.override.demo<span class="hljs-string">",
    "</span>id<span class="hljs-string">": "</span>107jvqtm-<span class="hljs-number">17</span><span class="hljs-string">",
    "</span>lifecycleStatus<span class="hljs-string">": "</span>constructing<span class="hljs-string">",
    "</span>destroy<span class="hljs-string">": { Function
        
    },
    "</span>options<span class="hljs-string">": {
        "</span>gradeNames<span class="hljs-string">": [
            "</span>fluid.sandbox.override.demo<span class="hljs-string">",
            "</span>fluid.component<span class="hljs-string">"
        ],
        "</span>distributeOptions<span class="hljs-string">": {
            "</span>no-namespace-distribution-107jvqtm-<span class="hljs-number">16</span><span class="hljs-string">": {
                "</span>source<span class="hljs-string">": "</span>{that}.toDistribute<span class="hljs-string">",
                "</span>target<span class="hljs-string">": "</span>{that fluid.sandbox.override.marker}.options.components.toDistribute<span class="hljs-string">",
                "</span>namespace<span class="hljs-string">": "</span>no-namespace-distribution-107jvqtm-<span class="hljs-number">16</span><span class="hljs-string">"
            }
        },
        "</span>argumentMap<span class="hljs-string">": {
            "</span>options<span class="hljs-string">": 0
        },
        "</span>initFunction<span class="hljs-string">": "</span>fluid.initLittleComponent<span class="hljs-string">",
        "</span>components<span class="hljs-string">": {
            "</span>toDistribute<span class="hljs-string">": {
                "</span>type<span class="hljs-string">": "</span>fluid.component<span class="hljs-string">"
            },
            "</span>toReceive<span class="hljs-string">": {
                "</span>type<span class="hljs-string">": "</span>fluid.sandbox.override.marker<span class="hljs-string">"
            }
        },
        "</span>events<span class="hljs-string">": {
            "</span>onCreate<span class="hljs-string">": null,
            "</span>onDestroy<span class="hljs-string">": null,
    .... [output suppressed at 1024 chars - for more output, increase fluid.logObjectRenderChars]
    while constructing component of type fluid.sandbox.override.demo with arguments {
    
}
19:37:41.642:  FATAL ERROR: Uncaught exception: Assertion failure - check console for more details: Unrecognised material in place of subcomponent toDistribute - no "</span>type<span class="hljs-string">" field found
Error
    at Error.fluid.FluidError (/Users/duhrer/Source/rtf/fluid-sandbox.local/node_modules/infusion/src/framework/core/js/Fluid.js:173:22)
    at fluid.builtinFail (/Users/duhrer/Source/rtf/fluid-sandbox.local/node_modules/infusion/src/framework/core/js/Fluid.js:190:15)
    at Object.that.fire (/Users/duhrer/Source/rtf/fluid-sandbox.local/node_modules/infusion/src/framework/core/js/Fluid.js:1397:40)
    at Object.fluid.fail (/Users/duhrer/Source/rtf/fluid-sandbox.local/node_modules/infusion/src/framework/core/js/Fluid.js:205:32)
    at Object.fluid.initDependent (/Users/duhrer/Source/rtf/fluid-sandbox.local/node_modules/infusion/src/framework/core/js/FluidIoC.js:1290:19)
    at /Users/duhrer/Source/rtf/fluid-sandbox.local/node_modules/infusion/src/framework/core/js/FluidIoC.js:1346:19
    at Object.fluid.each (/Users/duhrer/Source/rtf/fluid-sandbox.local/node_modules/infusion/src/framework/core/js/Fluid.js:470:17)
    at Object.fluid.initDependents (/Users/duhrer/Source/rtf/fluid-sandbox.local/node_modules/infusion/src/framework/core/js/FluidIoC.js:1345:15)
    at Object.fluid.initComponent (/Users/duhrer/Source/rtf/fluid-sandbox.local/node_modules/infusion/src/framework/core/js/Fluid.js:2532:19)
    at creator (/Users/duhrer/Source/rtf/fluid-sandbox.local/node_modules/infusion/src/framework/core/js/Fluid.js:1807:30)

Process finished with exit code 0
</span></code></pre>

                    </li>
                    
                    <li id="comment-24331">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2015-09-27T19:34:29.274-0400">2015-09-27T19:34:29.274-0400</relative-time></i></p>
                        <p>In fact, this facility works fine - now my brain is less fuddled I realise that there was a further error in the original (faulty, but unfortunately supported under the old framework) scheme for distributing the injected component - the record mentioned "source" (which is intended to hold an IoC REFERENCE TO OPTIONS) rather than "record" (which is intended to hold the actual OPTIONS THEMSELVES). This is a distinction which can easily be missed - as well as a test case for the correct syntax, I have added further diagnostics into the framework to attempt to flag faulty distributions more intelligibly : </p>
<p><a href="https://github.com/fluid-project/infusion/pull/638">https://github.com/fluid-project/infusion/pull/638</a></p>
<p>i) Any "source" path which doesn't have "options" as the first path segment (e.g. source: {that} or source: {that}.componentName which can NEVER be valid) is now flagged<br>
ii) Any "target" path which doesn't hit a recognised top-level record path (i.e. options, component, type, container, createOnEvent or priority) is flagged (e.g. target: {that}.components can NEVER be valid)</p>
<p>The pull verifies that</p>
<p>distributeOptions: { <br>
record: "{that}.componentName", <br>
target: "{that}.options.components.componentName" <br>
} </p>
<p>as a strategy for achieving the headline effect desired at the top of the JIRA works ok</p>

                    </li>
                    
                    <li id="comment-24333">
                        <p class="mb-0"><b>Tony Atkins [RtF]</b> <i>commented <relative-time datetime="2015-09-28T03:18:59.215-0400">2015-09-28T03:18:59.215-0400</relative-time></i></p>
                        <p>Thanks for clarifying, that explains a lot.  I will prune away my workaround in favor of the correct syntax shortly.</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-5770/"><span class="aria-hidden">←</span> Previous: FLUID-5770</a>
        <a class="mx-1" href="/browse/FLUID-5772/">Next: FLUID-5772 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>