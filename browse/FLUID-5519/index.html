<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-5519  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-5519 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-5519/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-5519/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-5519/">FLUID-5519</a></li>
            </ol>
        </nav>
        <h1>FLUID-5519: Timing of "initial transaction" in new model relay system is problematic</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-5519">FLUID-5519</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2014-10-02T15:39:33.259-0400" prefix="">2014-10-02T15:39:33.259-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2024-07-22T10:35:30.631-0400" prefix="">2024-07-22T10:35:30.631-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>4.0</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Data Binder</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>The "initial transaction" was introduced in the new model relay system so that model listeners could depend more reliably on invariants - that is, that they could be sure that there was a notification of a model change corresponding to every transition of the model from its initial state.<br>
Unfortunately, the timing of this transaction can often interact unhelpfully with the overall component construction process. It had been imagined that the initial transaction could be reliably positioned with respect, at least, to the "onCreate" event but it turns out that not even this is true - depending on the order of encountering and initialising components, it's possible for the initial transaction to occur before the onCreate of some components in the tree, but after that of others.<br>
This is obviously unsatisfactory, and the situation is also triggering outright bugs - for example an invoker which is registered as a modelListener notified during the initial transaction may not yet have been initialised. See discussion in IRC at <a href="https://botbot.me/freenode/fluid-work/2014-10-02/?msg=22758352&page=2">https://botbot.me/freenode/fluid-work/2014-10-02/?msg=22758352&amp;page=2</a></p>
<p>The only sound resolution to this problem can follow the <a href="/browse/FLUID-4925/">FLUID-4925</a> "wave of explosions" work. The previous conception had been that the model skeleton would immediately follow the component shell in instantiation order, but these experiences suggest that actually the model skeleton should actually form a final penultimate phase of component instantiation, and any "early demanders" of model state should block, promise-like, on this phase.</p>

            </div>
            
            
            
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-5518/"><span class="aria-hidden">←</span> Previous: FLUID-5518</a>
        <a class="mx-1" href="/browse/FLUID-5520/">Next: FLUID-5520 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>