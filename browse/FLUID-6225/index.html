<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-6225  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-6225 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-6225/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-6225/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-6225/">FLUID-6225</a></li>
            </ol>
        </nav>
        <h1>FLUID-6225: Self-deduping algorithm has faulty statefulness with respect to uncaught exception handler</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-6225">FLUID-6225</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2017-11-15T18:27:41.367-0500" prefix="">2017-11-15T18:27:41.367-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2017-11-22T04:28:16.810-0500" prefix="">2017-11-22T04:28:16.810-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Framework</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>In the process of resolving <a href="/browse/KETTLE-65/">KETTLE-65</a>, Tony Atkins [RtF] found that the simple process of updating Kettle's dependency on Infusion broke one of its tests, the "ErrorTests.js" which rely on interception via node's "uncaught exception handler".</p>
<p>It appears this arose simply because of a mismatch between the versions of Infusion used by kettle and node-jqunit - these had been brought into step by a previous round of dedupe fixing.</p>
<p>It turns out that the Infusion module loader operates the faulty sequence of registering its listener for the uncaught exception handler first, before it attempts to see if it itself is the winner of the "dedupe race". This means that the handler now registered by the current version of node-jqunit ends up losing the race against the user.</p>
<p>The thinking behind this sequence had been that we wanted to make sure that any errors triggered during the self-deduping process itself would be reported by the same standard means, but we clearly can't have our cake and eat it in this regard. Also, we have issues with the noisiness of Infusion loading in any case - it sends messages direct to console.log because it can't yet depend on a working Infusion, but this makes it unsuitable for implementing certain kinds of apps, e.g. UNIX-style CLI ones.</p>

            </div>
            
            
            
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-6224/"><span class="aria-hidden">←</span> Previous: FLUID-6224</a>
        <a class="mx-1" href="/browse/FLUID-6226/">Next: FLUID-6226 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>