<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> SJRK-354  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" SJRK-354 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/SJRK-354/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/SJRK-354/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/SJRK" data-pagefind-filter="project">Social Justice Repair Kit</a></li>
                <li><a href="/browse/SJRK-354/">SJRK-354</a></li>
            </ol>
        </nav>
        <h1>SJRK-354: Constrain file uploads to broadly-supported formats</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/SJRK-354">SJRK-354</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/SJRK/?type=Task">Task</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Open</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>N/A</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/SJRK/?reporter=Gregor%20Moss">Gregor Moss</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2020-04-30T17:50:21.272-0400" prefix="">2020-04-30T17:50:21.272-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2020-11-12T16:43:49.879-0500" prefix="">2020-11-12T16:43:49.879-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Storytelling Tool Server</li>
                            
                            <li>Storytelling Tool UI</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>When uploading files to a media block (image, audio, video), add restrictions to limit allowed files to those which work in the supported browsers.</p>
<p>This work includes research into which formats are supported by which browsers, followed by adding the restrictions.</p>
<p>Colin Clark has conducted some similar research for his work on Bubbles, and he mentioned that (at the time of filing) h.264-encoded video in MPEG containers and WebM are basically the only broadly-supported formats. This is worth discussing.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-26509">
                        <p class="mb-0"><b>Colin Clark</b> <i>commented <relative-time datetime="2020-04-30T18:10:40.164-0400">2020-04-30T18:10:40.164-0400</relative-time></i></p>
                        <p>All modern browsers support the H.264 codec in an <a href="/browse/MPEG-4/">MPEG-4</a> container. Most browsers, with the exception of Safari, also support videos encoded with the VP8 and VP9 codecs within WebM containers. It sounds like the AV1 codec has also been adopted by all modern browsers except Safari (Apple is extremely conservative about codecs because of patent fears, not to mention the issue of hardware decoders to save battery life), and it looks like both WebM and MP4 containers are supported. <a href="https://caniuse.com/#search=video%20format">https://caniuse.com/#search=video format</a></p>
<p>We probably can't detect codecs within a file that hasn't yet been uploaded, so I'd guess that we're safe to filter on the various MP4 and WebM MIME types. Presumably we'll also need to validate on the server side in case someone's editing our markup in the inspector tools.</p>
<p>In the future, we can consider a back-end process that uses ffmpeg to re-encode videos on the fly to H.264/m4v, but that's likely a big feature.</p>

                    </li>
                    
                    <li id="comment-26510">
                        <p class="mb-0"><b>Gregor Moss</b> <i>commented <relative-time datetime="2020-04-30T18:16:19.506-0400">2020-04-30T18:16:19.506-0400</relative-time></i></p>
                        <p>Thanks for that detail, Colin! I expect that once <a href="/browse/SJRK-289/">SJRK-289</a> has been completed server-side, this should make the codec detection, validation and potential conversion of media files more feasible.</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/SJRK-353/"><span class="aria-hidden">←</span> Previous: SJRK-353</a>
        <a class="mx-1" href="/browse/SJRK-355/">Next: SJRK-355 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>