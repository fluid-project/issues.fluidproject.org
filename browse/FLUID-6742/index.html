<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-6742  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-6742 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-6742/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-6742/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-6742/">FLUID-6742</a></li>
            </ol>
        </nav>
        <h1>FLUID-6742: Race condition in IoC Testing Framework tests exposed by upgrade to Chrome 103</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-6742">FLUID-6742</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2022-07-01T18:57:20.687-0400" prefix="">2022-07-01T18:57:20.687-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2024-07-22T10:35:18.135-0400" prefix="">2024-07-22T10:35:18.135-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>4.1</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>4.2</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>IoC Testing Framework</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Recent pull requests have been stalling in GitHub's CI, such as <a href="https://github.com/fluid-project/infusion/pull/1083">https://github.com/fluid-project/infusion/pull/1083</a> for <a href="/browse/FLUID-6741/">FLUID-6741</a>, which investigation shows have been stalling in particular on "<a href="/browse/FLUID-5633/">FLUID-5633</a> strikes back sequence", a particularly ambitious test fixture which races an onCreate component construction against an IoCSS listener registration.</p>
<p>Given that our old version of QUnit includes an inbuild 13ms delay before the test sequence starts, there is no reason to expect the registration should complete before the construction starts.</p>
<p>Whilst we can revert this to the traditional pattern of firing construction as the first sequence element, we can note that now we have <a href="/browse/FLUID-6148/">FLUID-6148</a>, issues like <a href="/browse/FLUID-6541/">FLUID-6541</a> could now be remedied. We could delay onCreate of the environment based on QUnit's readiness via a modellised resource or so. What we would hope to achieve here is that the first sequence element, if it were passive, could ensure that any binding were in place to be able to observe onCreate. However, if it were active, it would be delayed until strictly after onCreate. This would be a nice "nice to have" but destabilising the existing, and diminishing pool of IoC testing framework users seems unattractive.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-25195">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2022-07-01T18:58:30.223-0400">2022-07-01T18:58:30.223-0400</relative-time></i></p>
                        <p>The sketch of this had</p>
<pre><code class="hljs language-java">model: {
&#160; &#160; &#160; &#160; QUnitReady: <span class="hljs-string">"{that}.resources.QUnitReady.parsed"</span>
&#160; &#160; },
&#160; &#160; resources: {
&#160; &#160; &#160; &#160; QUnitReady: {
&#160; &#160; &#160; &#160; &#160; &#160; promiseFunc: <span class="hljs-string">"fluid.identity"</span>,
&#160; &#160; &#160; &#160; &#160; &#160; promiseArgs: <span class="hljs-string">"{that}.QUnitReady"</span>
&#160; &#160; &#160; &#160; }
&#160; &#160; },
  &#160; members: {
&#160; &#160; &#160; &#160; QUnitReady: <span class="hljs-string">"@expand:fluid.promise()"</span>,
    }
</code></pre>
<p>but we would then have to run "runTests" in some workflow function that say, operated immediately after concludeComponentObservation. Could be done now, but messy.</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-6741/"><span class="aria-hidden">←</span> Previous: FLUID-6741</a>
        <a class="mx-1" href="/browse/FLUID-6743/">Next: FLUID-6743 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>