<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-5885  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-5885 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-5885/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-5885/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-5885/">FLUID-5885</a></li>
            </ol>
        </nav>
        <h1>FLUID-5885: Component context for {that} in indirect model listener is incorrect</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-5885">FLUID-5885</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Cannot%20Reproduce">Cannot Reproduce</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2016-04-12T16:37:39.051-0400" prefix="">2016-04-12T16:37:39.051-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2024-07-22T09:27:11.013-0400" prefix="">2024-07-22T09:27:11.013-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Framework</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p><a href="/browse/FLUID-5848/">FLUID-5848</a> implemented support for indirect model references (that is, those where the path segment "model" did not appear in the head position after the component context reference). Unfortunately this exposed an assumption/bug in the dispatch pathway - that the component where the listener is to be registered is the same as that where the reference is written. The following configuration:</p>
<pre><code class="hljs language-javascript">fluid.<span class="hljs-title function_">defaults</span>(<span class="hljs-string">"onward.adaptation"</span>, {
        <span class="hljs-attr">gradeNames</span>: <span class="hljs-string">"fluid.modelComponent"</span>,
        <span class="hljs-attr">components</span>: {
            <span class="hljs-attr">button</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-string">"fluid.button"</span>,
            }
        },
        <span class="hljs-attr">modelListeners</span>: {
            <span class="hljs-string">"{that}.button.model.pressed"</span>: {
                <span class="hljs-attr">namespace</span>: <span class="hljs-string">"toggleAdaptation"</span>,
                <span class="hljs-attr">funcName</span>: <span class="hljs-string">"onward.toggleAdaptationContext"</span>,
                <span class="hljs-attr">args</span>: [<span class="hljs-string">"{change}.value"</span>, <span class="hljs-string">"{that}.options.contextGrade"</span>]
            }
        }
    });
</code></pre>
<p>surprises the user because the value of <code>&amp;#123;that&amp;#125;</code> when resolving <code>&amp;#123;that&amp;#125;.options.contextGrade</code> refers to the button (at path <code>&amp;#123;that&amp;#125;.button</code>) rather than the context where it is written, being <code>onward.adaptation</code></p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-23645">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2016-04-18T21:45:47.451-0400">2016-04-18T21:45:47.451-0400</relative-time></i></p>
                        <p>Test case demonstrating absence is at <a href="https://github.com/fluid-project/infusion/pull/702">https://github.com/fluid-project/infusion/pull/702</a> - this failure is a priori impossible and must have been observed in a fit of madness</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-5884/"><span class="aria-hidden">←</span> Previous: FLUID-5884</a>
        <a class="mx-1" href="/browse/FLUID-5886/">Next: FLUID-5886 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>