<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-6346  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-6346 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-6346/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-6346/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-6346/">FLUID-6346</a></li>
            </ol>
        </nav>
        <h1>FLUID-6346: fluid.isArrayable faultily considers any object with a property named "jquery" is an array</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-6346">FLUID-6346</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2018-10-16T21:46:27.970-0400" prefix="">2018-10-16T21:46:27.970-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2018-10-18T08:46:49.403-0400" prefix="">2018-10-18T08:46:49.403-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Framework</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Our current implementation looks like this -</p>
<pre><code class="hljs language-java">fluid.isArrayable = function (totest) {
        <span class="hljs-keyword">return</span> totest &amp;&amp; (totest.jquery || Object.prototype.toString.call(totest) === <span class="hljs-string">"[object Array]"</span>);
    };
</code></pre>
<p>which is extremely generous and will catch any object with a property named "jquery". We finally fell foul of this when passing our own package.json file through fluid.copy in a Kettle test and it ended up truncating the entire "devDependencies" block which now includes an entry for jQuery (for some reason).</p>
<p>We should tighten up this test so it cannot be tripped by any plain object.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-23887">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2018-10-17T09:08:04.871-0400">2018-10-17T09:08:04.871-0400</relative-time></i></p>
                        <p>jQuery is in the devDependencies because Infusion's dependencies are now pulled in from NPM. It's not in the dependencies block because the NPM package of infusion includes it in the dist builds. See <a href="/browse/FLUID-6253/">FLUID-6253</a></p>

                    </li>
                    
                    <li id="comment-23891">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2018-10-17T12:23:22.519-0400">2018-10-17T12:23:22.519-0400</relative-time></i></p>
                        <p>Merged PR ( <a href="https://github.com/fluid-project/infusion/pull/940">https://github.com/fluid-project/infusion/pull/940</a>&#160;) into the project repo at&#160;787f7d5e5b9a3565f4843be491e64dcc9e5fe355</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-6345/"><span class="aria-hidden">←</span> Previous: FLUID-6345</a>
        <a class="mx-1" href="/browse/FLUID-6347/">Next: FLUID-6347 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>