<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-3953  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-3953 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-3953/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-3953/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-3953/">FLUID-3953</a></li>
            </ol>
        </nav>
        <h1>FLUID-3953: Almost all image reorderer unit tests are failing: IE 9</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-3953">FLUID-3953</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Blocker</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Colin Clark</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Justin%20Obara">Justin Obara</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2010-12-18T13:14:32.906-0500" prefix="">2010-12-18T13:14:32.906-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2011-06-02T16:13:32.331-0400" prefix="">2011-06-02T16:13:32.331-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.3</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.4</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Image Reorderer</li>
                            
                            <li>Reorderer</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Almost all of the Image Reorderer unit tests are failing in Win7 of IE9.</p>
<p>The failing tests all have errors like.</p>
<p>1.Died on test #1: Problem in document structure - picked up element [object HTMLDivElement] for id gallery:::gallery-thumbs::: without this id - most likely the element has a name which conflicts with this id</p>
<p>Steps to reproduce:</p>
<p>1) Run the image reorderer unit tests<br>
<a href="http://build.fluidproject.org/infusion/tests/component-tests/reorderer/html/ImageReorderer-test.html">http://build.fluidproject.org/infusion/tests/component-tests/reorderer/html/ImageReorderer-test.html</a></p>

            </div>
            
            <div class="spacing-y-1">
                <h2>Environments</h2>
                <p>IE9 (Win 7)</p>

            </div>
            
            
            
            <div class="spacing-y-1">
                <h2>Attachments</h2>
                <ul class="spacing-y-1" role="list">
                    
                    <li>
                        <a href="https://idrc.cachefly.net/issues.fluidproject.org/FLUID/FLUID-3953/Screen shot.png">
                            
                                <img src="https://idrc.cachefly.net/issues.fluidproject.org/FLUID/FLUID-3953/Screen shot.png" alt="Screen shot.png">
                            
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://idrc.cachefly.net/issues.fluidproject.org/FLUID/FLUID-3953/screenshot-1.jpg">
                            
                                <img src="https://idrc.cachefly.net/issues.fluidproject.org/FLUID/FLUID-3953/screenshot-1.jpg" alt="screenshot-1.jpg">
                            
                        </a>
                    </li>
                    
                </ul>
            </div>
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-18381">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2010-12-18T13:15:29.527-0500">2010-12-18T13:15:29.527-0500</relative-time></i></p>
                        <p>"Screen shot" shows some of the failing tests</p>

                    </li>
                    
                    <li id="comment-18386">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2011-05-10T14:16:03.313-0400">2011-05-10T14:16:03.313-0400</relative-time></i></p>
                        <p>Another screen shot of the ImageReorderer.  The error message is a bit different than the Dec 18, 2010's screen shot. </p>

                    </li>
                    
                    <li id="comment-18390">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2011-05-16T16:08:01.778-0400">2011-05-16T16:08:01.778-0400</relative-time></i></p>
                        <p>Bug Parade Infusion</p>

                    </li>
                    
                    <li id="comment-18392">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2011-05-20T15:53:45.000-0400">2011-05-20T15:53:45.000-0400</relative-time></i></p>
                        <p>On IE9, if an element has both attribute "id" and "rsf:id", then IE9 overwrites "id" to "rsf:id".  Causing a "not found" for "id".</p>

                    </li>
                    
                    <li id="comment-18395">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2011-05-20T15:56:55.546-0400">2011-05-20T15:56:55.546-0400</relative-time></i></p>
                        <p>Added unit tests for IE9 and attributes with both "id" and "rsf:id", <a href="https://github.com/harriswong/infusion/tree/FLUID-3953">https://github.com/harriswong/infusion/tree/FLUID-3953</a></p>

                    </li>
                    
                    <li id="comment-18399">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2011-05-26T10:54:09.751-0400">2011-05-26T10:54:09.751-0400</relative-time></i></p>
                        <p>Seems to be related to document mode in IE9.  If we switch Ducument Mode to IE8 and below, the tests will pass.</p>

                    </li>
                    
                    <li id="comment-18401">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2011-05-26T15:25:38.405-0400">2011-05-26T15:25:38.405-0400</relative-time></i></p>
                        <p>==== Brief ====<br>
It seems like rsf:id + IE9 Document mode is the cause of this problem.  The details on the differences between IE8 and IE9 that causes this failure are uncertain.  I have tried using different doctypes, and the result is not consistent.  I have also tried using HTML5's doctype, still no luck.  </p>
<p>==== Steps to Reproduce ====<br>
1. create an HTML page that loads jquery.js and fluid.js<br>
2. create 2 divs, <br>
&lt;div id="test-no-rsf-id"&gt;No rsf:id&lt;/div&gt;<br>
&lt;div id="test-with-rsf-id" rsf:id="apple"&gt;with rsf:id&lt;/div&gt;<br>
3. run fluid.jById('test-with-rsf-id'); on IE9, it will fail.<br>
4. run fluid.jById('test-no-rsf-id'); on IE9, it should pass.</p>
<p>==== More Details ====<br>
If we run document.getElementById('test-with-rsf-id').getAttribute('id'), it will return null.<br>
If we try to get the list of attributes,<br>
document.getElementById('test-with-rsf-id').attributes[0].name --&gt; 'rsf:id'<br>
document.getElementById('test-with-rsf-id').attributes[1].name --&gt; 'rsf:id'<br>
It seems like the attribute "id" is overwrote by rsf:id in IE9's DOM. Where as in FF and Chrome, it's<br>
document.getElementById('test-with-rsf-id').attributes[0].name --&gt; 'id'<br>
document.getElementById('test-with-rsf-id').attributes[1].name --&gt; 'rsf:id'<br>
Note: This is true even without both jQuery and Fluid libraries.</p>
<p>==== Unit test ====<br>
I have added a unit test for this, <a href="https://github.com/harriswong/infusion/commit/c254cc75d213b534f3898e07c96525e590d84339">https://github.com/harriswong/infusion/commit/c254cc75d213b534f3898e07c96525e590d84339</a></p>
<p>==== Suggested Fix ====<br>
There are a few options to address this problem:<br>
1. Remove rsf:id, since image reorderer doesn't need rsf:id.  <br>
2. Add meta-data to force IE9 to use other document mode.  &lt;meta http-equiv="X-UA-Compatible" content="IE=xxx" &gt;, <a href="http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx">http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx</a><br>
3. This could be an IE9 bug since it makes no sense to overwrite the "id" attribute with our custom attribute "rsf:id".  We may want to mark this test case as "expected to fail with IE9" and wait till it's fixed, then re-test it again.</p>
<p>==== Additional info ====<br>
Posted a thread in MSDN, <a href="http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/dca80bb2-20b2-4029-8600-cd363cc64ddd">http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/dca80bb2-20b2-4029-8600-cd363cc64ddd</a></p>

                    </li>
                    
                    <li id="comment-18409">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2011-05-30T09:12:44.685-0400">2011-05-30T09:12:44.685-0400</relative-time></i></p>
                        <p>Antranig has made a pull request for a potential fix.<br>
<a href="https://github.com/fluid-project/infusion/pull/57">https://github.com/fluid-project/infusion/pull/57</a></p>

                    </li>
                    
                    <li id="comment-18413">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2011-06-02T16:13:32.329-0400">2011-06-02T16:13:32.329-0400</relative-time></i></p>
                        <p>Pushed antranig's fix at ca843c2cffac362c095ffdf00f8e6529336b9a6d</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-3952/"><span class="aria-hidden">←</span> Previous: FLUID-3952</a>
        <a class="mx-1" href="/browse/FLUID-3954/">Next: FLUID-3954 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>