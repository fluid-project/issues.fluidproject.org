<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-6488  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-6488 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-6488/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-6488/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-6488/">FLUID-6488</a></li>
            </ol>
        </nav>
        <h1>FLUID-6488: Keyboard-a11y failure in "activatable" on Firefox and Fedora</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-6488">FLUID-6488</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Reopened</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Justin Obara</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2020-04-10T08:28:40.590-0400" prefix="">2020-04-10T08:28:40.590-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2020-05-14T14:01:27.982-0400" prefix="">2020-05-14T14:01:27.982-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Keyboard Accessibility</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Failed in CI at&#160;<a href="https://github.com/fluid-project/infusion/pull/981">https://github.com/fluid-project/infusion/pull/981</a></p>
<p></p>
<pre><code class="hljs language-java">not ok <span class="hljs-number">14</span> Firefox <span class="hljs-number">75.0</span> - [<span class="hljs-number">879</span> ms] - Framework Tests: /tests/framework-tests/core/html/Keyboard-a11y-test.html
    ---
        stack: &gt;
            runLoggingCallbacks<span class="hljs-meta">@http</span>:<span class="hljs-comment">//localhost:7357/tests/lib/qunit/js/qunit.js:1611:19</span>
            pushFailure<span class="hljs-meta">@http</span>:<span class="hljs-comment">//localhost:7357/tests/lib/qunit/js/qunit.js:998:22</span>
            run<span class="hljs-meta">@http</span>:<span class="hljs-comment">//localhost:7357/tests/lib/qunit/js/qunit.js:212:10</span>
            run/&lt;<span class="hljs-meta">@http</span>:<span class="hljs-comment">//localhost:7357/tests/lib/qunit/js/qunit.js:366:10</span>
            process<span class="hljs-meta">@http</span>:<span class="hljs-comment">//localhost:7357/tests/lib/qunit/js/qunit.js:1459:24</span>
            start/&lt;<span class="hljs-meta">@http</span>:<span class="hljs-comment">//localhost:7357/tests/lib/qunit/js/qunit.js:484:12</span>
            
        message: &gt;
            keyboard-a11y: activate with Enter key: Died on test #<span class="hljs-number">5</span> <span class="hljs-meta">@http</span>:<span class="hljs-comment">//localhost:7357/tests/framework-tests/core/js/Keyboard-a11yTests.js:419:12</span>
            <span class="hljs-meta">@http</span>:<span class="hljs-comment">//localhost:7357/tests/framework-tests/core/js/Keyboard-a11yTests.js:607:3</span>
            : Operation is not supported
        Log: |
</code></pre>
<p></p>

            </div>
            
            <div class="spacing-y-1">
                <h2>Environments</h2>
                <p>Fedora 31, Firefox 75<br>
macOS 10.15.4, Firefox 75</p>

            </div>
            
            
            
            <div class="spacing-y-1">
                <h2>Attachments</h2>
                <ul class="spacing-y-1" role="list">
                    
                    <li>
                        <a href="https://idrc.cachefly.net/issues.fluidproject.org/FLUID/FLUID-6488/FLUID-6488-IE11-keyboard-a11y-failure.png">
                            
                                <img src="https://idrc.cachefly.net/issues.fluidproject.org/FLUID/FLUID-6488/FLUID-6488-IE11-keyboard-a11y-failure.png" alt="FLUID-6488-IE11-keyboard-a11y-failure.png">
                            
                        </a>
                    </li>
                    
                </ul>
            </div>
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-25292">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2020-04-15T16:55:37.798-0400">2020-04-15T16:55:37.798-0400</relative-time></i></p>
                        <p>This is also failing when running off the build site, at least on macOS with FF 75.&#160;<a href="https://build.fluidproject.org/infusion/tests/framework-tests/core/html/Keyboard-a11y-test.html?testNumber=17">https://build.fluidproject.org/infusion/tests/framework-tests/core/html/Keyboard-a11y-test.html?testNumber=17</a></p>

                    </li>
                    
                    <li id="comment-25293">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2020-04-15T17:03:01.487-0400">2020-04-15T17:03:01.487-0400</relative-time></i></p>
                        <p>Looks like this is related to the <a href="https://github.com/fluid-project/infusion/blob/1280f700cb248ae8c7f5e1d5e0bc2435bc552acd/tests/framework-tests/core/js/Keyboard-a11yTests.js#L119">simulated key event</a>. &#160;According the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/createEvent">document.createEvent() docs</a> on MDN, many of the methods used with createEvent have been deprecated. We should use <a href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent">event constructors</a> instead.</p>

                    </li>
                    
                    <li id="comment-25294">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2020-04-16T08:36:44.522-0400">2020-04-16T08:36:44.522-0400</relative-time></i></p>
                        <p>More specifically the <a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/KeyboardEvent">KeyboardEvent</a> should be used.</p>
<p></p>
<p>Note: keyCode, charCode and which properties are also deprecated. May need to switch to use key or code instead.</p>

                    </li>
                    
                    <li id="comment-25295">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2020-04-16T09:21:38.938-0400">2020-04-16T09:21:38.938-0400</relative-time></i></p>
                        <p>I've been experimenting with this. I am able to get the Error in Firefox after switching to KeyboardEvent constructor. However, the onLeaveContainer tests are failing. It seems that we cannot simulate a tab press. Maybe just moving focus or calling blur on the element would be enough in the test.</p>
<p>Regarding keyCode being deprecated, we still need to use it in the tests because they keyboard-a11y plugin is specifically looking for keyCodes. We'd need to re-write it using "key" or "code" instead. The benefit of doing this would be that we could drop the jQuery UI dependency for the keyCodes.</p>

                    </li>
                    
                    <li id="comment-25296">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2020-04-16T09:57:18.030-0400">2020-04-16T09:57:18.030-0400</relative-time></i></p>
                        <p>the test "Leaving container: onUnselect" will work with blur, but "Leaving container: onLeaveContainer" is explicitly for tabbing out. I don't see a way that we can exercise this anymore.</p>
<p>see:&#160;<a href="https://github.com/fluid-project/infusion/blob/1280f700cb248ae8c7f5e1d5e0bc2435bc552acd/src/framework/core/js/jquery.keyboard-a11y.js#L358-L370">https://github.com/fluid-project/infusion/blob/1280f700cb248ae8c7f5e1d5e0bc2435bc552acd/src/framework/core/js/jquery.keyboard-a11y.js#L358-L370</a></p>
<p>I did try to switch to using the "which" property, but it still didn't work.</p>
<p></p>
<p>These keyboard synthesis tests only run in Firefox due to the <a href="https://github.com/fluid-project/infusion/blob/1280f700cb248ae8c7f5e1d5e0bc2435bc552acd/tests/framework-tests/core/js/Keyboard-a11yTests.js#L411-L417">guardMozilla()</a>. However, changing to use KeyboardEvent may allow us to run most of these tests in the other browsers as well.</p>
<p></p>

                    </li>
                    
                    <li id="comment-25297">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2020-04-16T10:11:55.059-0400">2020-04-16T10:11:55.059-0400</relative-time></i></p>
                        <p>I've filed&#160;<a href="/browse/FLUID-6492/">FLUID-6492</a> for updating the keyboard-a11y plugin to use "key" or "code" event properties.</p>

                    </li>
                    
                    <li id="comment-25298">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2020-04-17T13:52:59.679-0400">2020-04-17T13:52:59.679-0400</relative-time></i></p>
                        <p>I found that whilst there was code to get the keyboard-a11y tests to run on IE11, they didn't actually pass in my testing. I get 4 failures starting with "activate with Enter key" as per the attached screen shot</p>

                    </li>
                    
                    <li id="comment-25299">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2020-04-17T13:55:51.394-0400">2020-04-17T13:55:51.394-0400</relative-time></i></p>
                        <p>Reported IE11 Version: 11.0.9600.18499 Update Versions: 11.0.36 (KB3191492)</p>

                    </li>
                    
                    <li id="comment-25300">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2020-04-27T09:26:17.144-0400">2020-04-27T09:26:17.144-0400</relative-time></i></p>
                        <p>Antranig Basman I've tested this using a Windows 8.1 VM running IE 11 Version: 11.0.9600.19678 Update Versionss: 11.0.185 (KB4550905). The tests are passing there. If it's an issue with different versions of IE 11, should we consider not supporting it at all for the tests?</p>

                    </li>
                    
                    <li id="comment-25301">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2020-04-27T09:27:25.308-0400">2020-04-27T09:27:25.308-0400</relative-time></i></p>
                        <p>I also tested using a Windows 10 VM running IE 11 Version: 1.846.11763.0 Update Versions: 11.0.160 (KB4525106) and it was also working.</p>

                    </li>
                    
                    <li id="comment-25302">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2020-04-28T12:41:14.088-0400">2020-04-28T12:41:14.088-0400</relative-time></i></p>
                        <p>Hi Justin Obara - I've tried testing with another IE11 at my disposal which reports itself as Version: 11.0.9600.19002, Update Versions: 11.0.60 and whilst the keyboard-a11y tests indeed run fine, I get various other test failures, e.g. in the Caching-test.html I get "Unable to get property 'clear' of undefined" and the IoC testing framework tests hang, unless they are run with the Developer Tools console open.</p>
<p>If you are amenable, I agree that we should cease to advertise IE11 as a supported browser for Infusion as of now, since it seems the effort of testing reliably with it exceeds what we can manage as a community. If you agree, I'll file a separate Jira for the update of our docs and testing configuration to reflect this.</p>

                    </li>
                    
                    <li id="comment-25303">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2020-04-28T14:26:32.321-0400">2020-04-28T14:26:32.321-0400</relative-time></i></p>
                        <p>Antranig Basman I wonder what's causing those other issues.</p>
<p>While I'm not a fan of maintaining IE 11 support, you had suggested that we make this upcoming release the last one to support IE 11. That way we had an option for our users to come back to.&#160;If we drop support for IE 11 now, we can either put out a beta or some other release that still officially supports IE 11 or just note that the 2.x line is the last that supported it.</p>
<p>Although I think what we should do first is to check with the community to see if there is any need for maintaining IE 11 support right now. I believe that will help us to better decide what path forward to take.</p>

                    </li>
                    
                    <li id="comment-25304">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2020-04-28T19:47:06.033-0400">2020-04-28T19:47:06.033-0400</relative-time></i></p>
                        <p>Yes, I had indeed suggested that, but this was before it became clearer what the true costs of claiming robust IE11 support might actually be. It is indeed regrettable that IE11 usage is still stubbornly hovering somewhere around the 1-2% range.</p>

                    </li>
                    
                    <li id="comment-25305">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2020-05-14T14:01:27.982-0400">2020-05-14T14:01:27.982-0400</relative-time></i></p>
                        <p>Antranig Basman&#160;the feedback from the fluid-work list has all been in support of no longer officially supporting IE 11. See: <a href="http://fluid.2324889.n4.nabble.com/Proposal-to-remove-<a href=" browse="" IE-11="" "="">IE-11</a>-support-from-Infusion-td10852.html"&gt;http://fluid.2324889.n4.nabble.com/Proposal-to-remove-<a href="/browse/IE-11/">IE-11</a>-support-from-Infusion-td10852.html</p>
<p>Please feel free to update the documentation and other resources as you suggested.</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-6487/"><span class="aria-hidden">←</span> Previous: FLUID-6487</a>
        <a class="mx-1" href="/browse/FLUID-6489/">Next: FLUID-6489 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>