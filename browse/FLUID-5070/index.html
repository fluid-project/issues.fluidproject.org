<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-5070  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-5070 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-5070/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-5070/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-5070/">FLUID-5070</a></li>
            </ol>
        </nav>
        <h1>FLUID-5070: Tests written with IoC Testing Framework will sometimes attempt to reinstantiate a destroyed TestEnvironment</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-5070">FLUID-5070</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Open</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Justin%20Obara">Justin Obara</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2013-06-26T12:00:08.390-0400" prefix="">2013-06-26T12:00:08.390-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2015-06-15T10:34:34.331-0400" prefix="">2015-06-15T10:34:34.331-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.5</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Testing Infrastructure</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Steps to reproduce:</p>
<p>1) Run the SettingsPanels unit tests.<br>
<a href="http://build.fluidproject.org/infusion/tests/component-tests/uiOptions/html/SettingsPanels-test.html">http://build.fluidproject.org/infusion/tests/component-tests/uiOptions/html/SettingsPanels-test.html</a></p>
<p>All the tests should pass</p>
<p>2) Click the "Rerun" link beside each of the tests to run them individually.<br>
Notice that from the 3rd one on, they start to have failures, due to the tests being run twice.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-20697">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2013-06-26T12:05:00.105-0400">2013-06-26T12:05:00.105-0400</relative-time></i></p>
                        <p>The problem lies with the following block of code, which assumes that an asynchronous test issued to QUnit will always begin to execute asynchronously. Sometimes QUnit will finish the test completely before the the following queue check executes, which then causes the testing framework to faultily try to reinstantiate the entire tree when it reaches the "noteTest" directive:</p>
<p>IoCTestUtils.js lines 466-479</p>
<p>// Note that this test relies on an implementation detail of qunit. For those<br>
// tests which fail the "validTest" test due to being filtered out in the UI,<br>
// they result in no material placed in the queue. We escape the case where they<br>
// might enter the queue and immediately leave it as a result of only ever issuing<br>
// asynchronous tests<br>
var oldLength = QUnit.config.queue.length;<br>
jqUnit[testType](fixture.name, testFunc);<br>
if (QUnit.config.queue.length === oldLength) {<br>
fluid.log(fluid.logLevel.IMPORTANT, "Skipped test " + fixture.name);<br>
}<br>
else {<br>
fluid.log(fluid.logLevel.IMPORTANT, "Successfully queued test " + fixture.name);<br>
fluid.test.noteTest(testCaseState.root, 1);<br>
} </p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-5069/"><span class="aria-hidden">←</span> Previous: FLUID-5069</a>
        <a class="mx-1" href="/browse/FLUID-5071/">Next: FLUID-5071 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>