<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-2662  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-2662 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-2662/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-2662/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-2662/">FLUID-2662</a></li>
            </ol>
        </nav>
        <h1>FLUID-2662: In the keyboard-a11y plugin, onLeaveContainer and onUnselect are not called when the user moves focus outside the container of selectables.</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-2662">FLUID-2662</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Critical</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Colin Clark</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Colin%20Clark">Colin Clark</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2009-05-11T17:18:48.000-0400" prefix="">2009-05-11T17:18:48.000-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2011-02-28T16:45:16.682-0500" prefix="">2011-02-28T16:45:16.682-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>0.7</li>
                            
                            <li>0.8</li>
                            
                            <li>1.0</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.1</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Keyboard Accessibility</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>There's a bug in the keyboard-a11y plugin where neither the onLeaveContainer and onUnselect callbacks are invoked when the user blurs out of the container of selectable elements. Here's the buggy code, starting on line 265 of keyboard-a11y.js:</p>
<p>var cleanUpWhenLeavingContainer = function(selectionContext) {<br>
if (selectionContext.onLeaveContainer) {<br>
selectionContext.onLeaveContainer(<br>
selectionContext.selectables[selectionContext.activeItemIndex]);<br>
} else if (selectionContext.onUnselect) {<br>
selectionContext.onUnselect(<br>
selectionContext.selectables[selectionContext.activeItemIndex]);<br>
}</p>
<p>The reason for this issue is that user-specified callbacks are actually located in the "options" property of the selection context. The code should look like this:</p>
<p>if (selectionContext.options.onLeaveContainer) {<br>
selectionContext.options.onLeaveContainer(<br>
selectionContext.selectables[selectionContext.activeItemIndex]);<br>
} else if (selectionContext.options.onUnselect) {<br>
selectionContext.options.onUnselect(<br>
selectionContext.selectables[selectionContext.activeItemIndex]);<br>
}</p>
<p>I'll write a test to show this issue and then fix.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-19043">
                        <p class="mb-0"><b>Colin Clark</b> <i>commented <relative-time datetime="2009-05-11T17:57:52.000-0400">2009-05-11T17:57:52.000-0400</relative-time></i></p>
                        <p>I fixed this issue in r7159.</p>

                    </li>
                    
                    <li id="comment-19047">
                        <p class="mb-0"><b>Michelle D'Souza</b> <i>commented <relative-time datetime="2011-02-28T16:45:16.680-0500">2011-02-28T16:45:16.680-0500</relative-time></i></p>
                        <p>Closing issues that were fixed in 1.1</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-2661/"><span class="aria-hidden">←</span> Previous: FLUID-2661</a>
        <a class="mx-1" href="/browse/FLUID-2663/">Next: FLUID-2663 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>