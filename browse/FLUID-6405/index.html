<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-6405  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-6405 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-6405/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-6405/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-6405/">FLUID-6405</a></li>
            </ol>
        </nav>
        <h1>FLUID-6405: IoC Testing Framework expands listeners early even as it expands events late</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-6405">FLUID-6405</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Open</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2019-10-02T18:25:32.009-0400" prefix="">2019-10-02T18:25:32.009-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2024-07-19T08:01:19.964-0400" prefix="">2024-07-19T08:01:19.964-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Testing Infrastructure</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>The IoC testing framework includes a "special dispensation" to allow event specifications to make use of IoCSS expressions to refer to components which are not instantiated at the point of executing the test sequence step. Unfortunately it still uses an eager expansion for "listener" as seen in the snippet</p>
<pre><code class="hljs language-java">fluid.test.decoders.event = function (testCaseState, fixture) {
        <span class="hljs-type">var</span> <span class="hljs-variable">analysed</span> <span class="hljs-operator">=</span> fluid.analyseTarget(testCaseState, fixture.event, <span class="hljs-string">"events"</span>);
        <span class="hljs-type">var</span> <span class="hljs-variable">listener</span> <span class="hljs-operator">=</span> fluid.test.decodeListener(testCaseState, fixture);
</code></pre>
<p>"analyseTarget" is capable of parsing full selector contexts whereas "decodeListener" will attempt to evaluate the listener there and then.</p>
<p>In writing some test cases for BULBILS, Colin wrote the following</p>
<pre><code class="hljs language-java">{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;event:&#160;<span class="hljs-string">"{app&#160;ipcHolder&#160;windough}.events.afterShow"</span>,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;listener:&#160;<span class="hljs-string">"{app&#160;ipcHolder&#160;ipc}.send"</span>,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;args:&#160;[<span class="hljs-string">"from&#160;main"</span>]
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;},
</code></pre>
<p>which failed with "Failed to resolve reference {app ipcHolder ipc}.send - could not match context with name app ipcHolder ipc from component { typeName: "electron.tests.ipcTester""</p>

            </div>
            
            
            
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-6404/"><span class="aria-hidden">←</span> Previous: FLUID-6404</a>
        <a class="mx-1" href="/browse/FLUID-6406/">Next: FLUID-6406 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>