<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-3131  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-3131 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-3131/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-3131/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-3131/">FLUID-3131</a></li>
            </ol>
        </nav>
        <h1>FLUID-3131: The default afterMove event listener code for the Image Reorderer doesn't get invoked, causing no results to be sent back to the server.</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-3131">FLUID-3131</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Blocker</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Justin Obara</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Colin%20Clark">Colin Clark</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2009-08-24T13:00:34.000-0400" prefix="">2009-08-24T13:00:34.000-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2009-10-05T16:49:34.000-0400" prefix="">2009-10-05T16:49:34.000-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>0.6beta1</li>
                            
                            <li>0.6</li>
                            
                            <li>0.7</li>
                            
                            <li>0.8</li>
                            
                            <li>0.8.1</li>
                            
                            <li>1.0</li>
                            
                            <li>1.1</li>
                            
                            <li>1.1.1</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.1.2</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Image Reorderer</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Currently, the Image Reorderer has a default afterMove event listener that takes care of updating the image order correctly for a form-based style of communicating with the server. It is intended to automatically POST the order back to the server after each move.</p>
<p>However, there is a bug in the code that causes it to never be invoked. The code tries to assign the event listener to the options.afterMoveCallback member, which is no longer supported by the Reorderer (and hasn't been since about Infusion 0.6 or so).</p>
<p>The fix is simple and will be included in Infusion 1.2. In the meantime, there are straightforward workarounds. Try this:</p>
<p>var url; // Put the URL you want to POST the order back to here.</p>
<p>fluid.reorderer("#gallery", {<br>
listeners: {<br>
afterMove: function (imageMoved, position, allImages) {<br>
images.each(function (idx, image) {<br>
jQuery(image).children("input").val(idx);<br>
});</p>
<p>var imageOrder = jQuery("#reorder-form").serialize();<br>
jQuery.ajax({<br>
type: "POST",<br>
url: url,<br>
data: imageOrder,<br>
complete: function (data, ajaxStatus) {<br>
// Handle success or failure by being nice to the user.<br>
}<br>
});<br>
}<br>
}<br>
});</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-17660">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2009-09-21T09:44:08.000-0400">2009-09-21T09:44:08.000-0400</relative-time></i></p>
                        <p>Bug Parade Infusion 1.1.2</p>

                    </li>
                    
                    <li id="comment-17662">
                        <p class="mb-0"><b>Colin Clark</b> <i>commented <relative-time datetime="2009-09-29T19:26:08.000-0400">2009-09-29T19:26:08.000-0400</relative-time></i></p>
                        <p>This fix has been implemented and is ready for code review.</p>

                    </li>
                    
                    <li id="comment-17665">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2009-10-04T13:17:32.000-0400">2009-10-04T13:17:32.000-0400</relative-time></i></p>
                        <p>Hi - I have reviewed the changes occurring at rev. 7828 (btw, we seem to have lost commit linking on JIRA again) and they look good - I do want to query the expansion of fluid.initView that used to occur at line 117 into the 3 lines now at line 128:<br>
var that = {};<br>
fluid.mergeComponentOptions(that, "fluid.reorderImages", options);<br>
that.container = fluid.container(container);<br>
which appear less idiomatic - is there a step of the initView workflow that we want to bypass here?</p>

                    </li>
                    
                    <li id="comment-17667">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2009-10-05T12:38:29.000-0400">2009-10-05T12:38:29.000-0400</relative-time></i></p>
                        <p>It seems that the fix for this may have caused some of the image reorderer's unit tests to fail</p>

                    </li>
                    
                    <li id="comment-17669">
                        <p class="mb-0"><b>Colin Clark</b> <i>commented <relative-time datetime="2009-10-05T16:30:44.000-0400">2009-10-05T16:30:44.000-0400</relative-time></i></p>
                        <p>This one is ready for code review again.</p>

                    </li>
                    
                    <li id="comment-17670">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2009-10-05T16:49:34.000-0400">2009-10-05T16:49:34.000-0400</relative-time></i></p>
                        <p>I have verified this as fixed, and close this JIRA through delegation of Royalty.</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-3129/"><span class="aria-hidden">←</span> Previous: FLUID-3129</a>
        <a class="mx-1" href="/browse/FLUID-3137/">Next: FLUID-3137 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>