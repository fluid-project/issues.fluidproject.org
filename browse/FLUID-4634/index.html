<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-4634  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-4634 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-4634/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-4634/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-4634/">FLUID-4634</a></li>
            </ol>
        </nav>
        <h1>FLUID-4634: Demands for boiled events will collide if they share any context values.</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-4634">FLUID-4634</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Justin Obara</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Justin%20Obara">Justin Obara</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2012-03-05T08:53:51.106-0500" prefix="">2012-03-05T08:53:51.106-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2013-04-29T14:32:40.962-0400" prefix="">2013-04-29T14:32:40.962-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.5</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.5</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>IoC System</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>If multiple components use the same name for a boiled event, the arguments specified in a demands block will collide if they share any of the same context. Meaning that in all instances the same demands block will be used to resolve the demanded options for the event. </p>

            </div>
            
            
            
            <div class="spacing-y-1">
                <h2>Attachments</h2>
                <ul class="spacing-y-1" role="list">
                    
                    <li>
                        <a href="https://idrc.cachefly.net/issues.fluidproject.org/FLUID/FLUID-4634/FLUID-4634.patch">
                            
                                FLUID-4634.patch
                            
                        </a>
                    </li>
                    
                </ul>
            </div>
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-15349">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2012-03-05T09:00:04.255-0500">2012-03-05T09:00:04.255-0500</relative-time></i></p>
                        <p><a href="/browse/FLUID-4634/">FLUID-4634</a>.patch provides unit tests that demonstrate this issue. </p>
<p>You can also find the unit tests in a branch in my github repo:<br>
<a href="https://github.com/jobara/infusion/tree/FLUID-4634">https://github.com/jobara/infusion/tree/FLUID-4634</a></p>

                    </li>
                    
                    <li id="comment-15353">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2012-05-09T03:15:11.494-0400">2012-05-09T03:15:11.494-0400</relative-time></i></p>
                        <p>Hi Justin - unfortunately this is currently "expected behaviour" due to the way context matching rules were implemented. As explained in <a href="/browse/FLUID-4707/">FLUID-4707</a> it would currently cause too much upheaval to rewrite these rules due to the change in meaning of a large number of already written demands blocks, so we will have to live with it until the framework is rewritten wholesale for <a href="/browse/FLUID-4392/">FLUID-4392</a>. In the meantime, a workaround would be to issue a contradicting demands block with no contexts which will still take priority over your block in mismatched situations - for example in your case you ought to be able to have success by writing </p>
<p>fluid.demands("testDemandedEvent", [], ["{arguments}.0"]);</p>
<p>which will take priority in all mismatching situations. Please could you rewrite your test case so that it cleans up the static environment (in a finally block) before it concludes - you can see examples of this style in FluidIoCTests.js</p>

                    </li>
                    
                    <li id="comment-15357">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2012-05-09T10:44:57.808-0400">2012-05-09T10:44:57.808-0400</relative-time></i></p>
                        <p>Thanks for looking at this Antranig. I've updated the test case to clean up the static environment. I put the test functions into a try block, with the code to delete the property from the static environment in the finally block.</p>

                    </li>
                    
                    <li id="comment-15360">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2013-03-06T01:31:18.121-0500">2013-03-06T01:31:18.121-0500</relative-time></i></p>
                        <p>Fixed along with <a href="/browse/FLUID-4707/">FLUID-4707</a> by merge at 91d5d1</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-4633/"><span class="aria-hidden">←</span> Previous: FLUID-4633</a>
        <a class="mx-1" href="/browse/FLUID-4636/">Next: FLUID-4636 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>