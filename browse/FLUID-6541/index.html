<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-6541  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-6541 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-6541/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-6541/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-6541/">FLUID-6541</a></li>
            </ol>
        </nav>
        <h1>FLUID-6541: Mixtures of plain async tests and IoC testing framework tests can jam in some situations</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-6541">FLUID-6541</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Improvement">Improvement</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Open</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2020-08-07T20:01:11.437-0400" prefix="">2020-08-07T20:01:11.437-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2024-07-18T07:36:52.477-0400" prefix="">2024-07-18T07:36:52.477-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Testing Infrastructure</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>As part of the work in implementing <a href="/browse/FLUID-6504/">FLUID-6504</a> for the Infusion Nexus, it was found that in some racy kind of way, mixing plain jqUnit.asyncTest fixtures with IoC testing framework fixtures could cause a hang. The relevant pull request is <a href="https://github.com/fluid-project/infusion-nexus/pull/25/files">https://github.com/fluid-project/infusion-nexus/pull/25/files</a><br>
Until the fixtures in  tests/NexusUtilsTests.js  were converted to jqUnit.sync, it was possible for them to cause a hang when run sequentially with bindModelTests. These tests properly should always have been sync since the behaviour they test is synchronous, but on the other hand it should not cause a fault if they expressed as async. Note that QUnit's sequence is to call QUnit.stop() on an async fixture and then to execute it - <a href="https://github.com/fluid-project/infusion/blob/master/tests/lib/qunit/js/qunit.js#L195">https://github.com/fluid-project/infusion/blob/master/tests/lib/qunit/js/qunit.js#L195</a></p>
<p>Anecdotally some odd behaviour has sometimes been received on mixing fixtures in this way but the entire "IoC Testing framework" needs an overhaul in any case to eliminate issues such as <a href="/browse/FLUID-6397/">FLUID-6397</a> once we can move fully over to the post <a href="/browse/FLUID-6148/">FLUID-6148</a> framework.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-25201">
                        <p class="mb-0"><b>Philip Tchernavskij</b> <i>commented <relative-time datetime="2020-08-10T13:55:55.396-0400">2020-08-10T13:55:55.396-0400</relative-time></i></p>
                        <p>I have written up a <a href="https://github.com/ptcher/infusion-nexus/tree/FLUID-6541">minimal breaking case</a> that is a heavily shaved-down version of the tests that were breaking in the <a href="/browse/FLUID-6504/">FLUID-6504</a> work.</p>
<p>To reproduce, clone and install that branch, and install and run tests using Node 12.14.</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-6540/"><span class="aria-hidden">←</span> Previous: FLUID-6540</a>
        <a class="mx-1" href="/browse/FLUID-6543/">Next: FLUID-6543 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>