<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-3771  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-3771 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-3771/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-3771/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-3771/">FLUID-3771</a></li>
            </ol>
        </nav>
        <h1>FLUID-3771: Expansion of arguments for fluid.deferredCall with respect to fluid.deferredInvokeCall is anomalous</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-3771">FLUID-3771</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Colin Clark</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2010-10-04T02:14:09.613-0400" prefix="">2010-10-04T02:14:09.613-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2010-12-15T19:33:14.591-0500" prefix="">2010-12-15T19:33:14.591-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.2.1</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.3</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>IoC System</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>At present, expansion of options trees presented to the IoC system as descended from the "components" block proceeds by an incorrect algorithm. This frequently appears when applying the expanders "deferredCall" vs "deferredInvokeCall". At present it is possible for this expansion to occur some variable number of times - for example, the test case in FluidIoCTests which is named "stackThroughInvoke" will fail, if the expander in its definition with type "deferredCall" is replaced with "deferredInvokeCall". This is because this substitution will cause the arguments list to be expanded twice, once as part of global expansion and then again when the expander is evaluated. This then discovers the component itself as deposited from phase 1 and attempts to treat it as material for expansion. This algorithm needs to be globally reimplemented, especially with respect to the more fine-grained "options expansion with priority" functionality that is upcoming.</p>

            </div>
            
            
            
            <div class="spacing-y-1">
                <h2>Attachments</h2>
                <ul class="spacing-y-1" role="list">
                    
                    <li>
                        <a href="https://idrc.cachefly.net/issues.fluidproject.org/FLUID/FLUID-3771/FLUID-3771.patch">
                            
                                FLUID-3771.patch
                            
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://idrc.cachefly.net/issues.fluidproject.org/FLUID/FLUID-3771/FLUID-3771 (2).patch">
                            
                                FLUID-3771 (2).patch
                            
                        </a>
                    </li>
                    
                </ul>
            </div>
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-13228">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2010-10-04T13:59:14.113-0400">2010-10-04T13:59:14.113-0400</relative-time></i></p>
                        <p>"Bug Parade Infusion 1.3"</p>

                    </li>
                    
                    <li id="comment-13229">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2010-10-05T03:22:38.675-0400">2010-10-05T03:22:38.675-0400</relative-time></i></p>
                        <p>Going on holiday patch. Perhaps it really is time to sign up to github</p>

                    </li>
                    
                    <li id="comment-13230">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2010-12-03T16:06:21.583-0500">2010-12-03T16:06:21.583-0500</relative-time></i></p>
                        <p>Updated version of patch with resolution for issue - still needs more tests and description</p>

                    </li>
                    
                    <li id="comment-13231">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2010-12-07T16:28:58.858-0500">2010-12-07T16:28:58.858-0500</relative-time></i></p>
                        <p>Fixed at revision 10335, along with numerous other fixes for consistency and correctness of the IoC system - including "noCopy" for invoker arguments, and "proleptic ginger nicknames"</p>

                    </li>
                    
                    <li id="comment-13232">
                        <p class="mb-0"><b>Colin Clark</b> <i>commented <relative-time datetime="2010-12-15T19:33:14.584-0500">2010-12-15T19:33:14.584-0500</relative-time></i></p>
                        <p>I've reviewed Antranig's changes for this issue and they look generally reasonable. +1 for inclusion in Infusion 1.3.</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-3770/"><span class="aria-hidden">←</span> Previous: FLUID-3770</a>
        <a class="mx-1" href="/browse/FLUID-3772/">Next: FLUID-3772 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>