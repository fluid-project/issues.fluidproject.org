<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-6305  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-6305 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-6305/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-6305/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-6305/">FLUID-6305</a></li>
            </ol>
        </nav>
        <h1>FLUID-6305: fluid.fetchResources does not use defaultLocale from an individual resourceSpec entry</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-6305">FLUID-6305</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Gregor Moss</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Gregor%20Moss">Gregor Moss</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2018-07-20T15:50:47.585-0400" prefix="">2018-07-20T15:50:47.585-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2024-07-22T08:57:36.449-0400" prefix="">2024-07-22T08:57:36.449-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Framework</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>If fluid.fetchResources is called with a resourceSpec entry which specifies a defaultLocale but not a locale, the defaultLocale is not used when attempting the fetch and fallback process.</p>
<p>On lines 70-74 of FluidRequests.js, the optional override defaultLocale is checked, and if locale is not present, the locale is also overridden. If the optional override is not present, however, there is no further check for setting the locale based on the defaultLocale.</p>
<p>The intention of the code seems to be as follows:</p>
<ul>
<li>a defaultLocale can be set on an individual resourceSpec entry and will be used if a locale is not also supplied</li>
<li>a defaultLocale option can be passed to fluid.fetchResources and will override the defaultLocale of each resourceSpec</li>
</ul>
<p>The first does not take place; this issue is obscured in the tests (FluidRequestsTests.js) because of lines 176-178:</p>
<pre><code class="hljs language-javascript">fluid.<span class="hljs-title function_">fetchResources</span>(resourceSpecs, callback, {
            <span class="hljs-attr">defaultLocale</span>: <span class="hljs-string">"en"</span>
        });
</code></pre>
<p>Because a defaultLocale is set and none of the resourceSpec entries in the tests set a defaultLocale other than en, it hasn't been clear that this is an issue until recent multilingual work.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-23048">
                        <p class="mb-0"><b>Alan Harnum</b> <i>commented <relative-time datetime="2018-07-24T13:50:31.242-0400">2018-07-24T13:50:31.242-0400</relative-time></i></p>
                        <p>Prospective fix in this PR:&#160;<a href="https://github.com/fluid-project/infusion/pull/913">https://github.com/fluid-project/infusion/pull/913</a></p>

                    </li>
                    
                    <li id="comment-23049">
                        <p class="mb-0"><b>Alan Harnum</b> <i>commented <relative-time datetime="2018-08-02T13:31:10.973-0400">2018-08-02T13:31:10.973-0400</relative-time></i></p>
                        <p>Merged 2018-08-02</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-6304/"><span class="aria-hidden">←</span> Previous: FLUID-6304</a>
        <a class="mx-1" href="/browse/FLUID-6306/">Next: FLUID-6306 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>