<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-5607  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-5607 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-5607/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-5607/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-5607/">FLUID-5607</a></li>
            </ol>
        </nav>
        <h1>FLUID-5607: Refactor Tooltip component to bring it inline with current best practices</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-5607">FLUID-5607</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Open</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>N/A</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Justin%20Obara">Justin Obara</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2015-03-20T13:00:50.801-0400" prefix="">2015-03-20T13:00:50.801-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2015-06-22T15:10:25.802-0400" prefix="">2015-06-22T15:10:25.802-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Tooltip</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>The tooltip component has several TODO's scattered throughout the codebase, as it was waiting on <a href="/browse/FLUID-3674/">FLUID-3674</a> and <a href="/browse/FLUID-4890/">FLUID-4890</a>.</p>
<p>The TODO's should be addressed, now that those issues have been resolved in master. Any other modernization that can happen at this time should also be implemented.</p>
<ul>
<li>Currently the modelListener is setup to listen to changes on the entire model, but should listen separately to changes on "content" and "idToContent"</li>
<li>remove the "initialised" member workflow and replace with a framework facility</li>
<li>consider removing backwards compatibility code</li>
</ul>

            </div>
            
            
            
            <div class="spacing-y-1">
                <h2>Attachments</h2>
                <ul class="spacing-y-1" role="list">
                    
                    <li>
                        <a href="https://idrc.cachefly.net/issues.fluidproject.org/FLUID/FLUID-5607/Tooltip.patch">
                            
                                Tooltip.patch
                            
                        </a>
                    </li>
                    
                </ul>
            </div>
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-19903">
                        <p class="mb-0"><b>Simon Bates</b> <i>commented <relative-time datetime="2015-06-15T15:09:26.742-0400">2015-06-15T15:09:26.742-0400</relative-time></i></p>
                        <p>I started looking at the following point:</p>
<ul>
<li>remove the "initialised" member workflow and replace with a framework facility</li>
</ul>
<p>However, after chatting with Antranig, he suggests that this issue be put on hold until after <a href="https://github.com/fluid-project/infusion/pull/591">https://github.com/fluid-project/infusion/pull/591</a> is merged.</p>
<p>The following are notes on where I got to.</p>
<p>"initialised" is referenced in Tooltip.js at line 130:</p>
<p>that.initialised = false; // TODO: proper framework facility for this coming with <a href="/browse/FLUID-4890/">FLUID-4890</a></p>
<p>The pull request with the code for <a href="/browse/FLUID-4890/">FLUID-4890</a>: <a href="https://github.com/fluid-project/infusion/commit/f5403d5027923475e0c4314005f6723d2e732759">https://github.com/fluid-project/infusion/commit/f5403d5027923475e0c4314005f6723d2e732759</a></p>
<p>That pull request stops events from being fired on destroyed components.</p>
<p>I tried to see if we can simply remove the "initialised" member and (with one small change in fluid.tooltip.setup) the tests all pass with "initialised" removed. However, I do not believe that the existing tests cover all the flows that "initialised" guards.</p>
<p>To continue this work, I think the next step would be to understand the framework changes that have happened since the "initialised" was added to the Tooltip to see if it is actually still needed. And add unit tests as needed.</p>
<p>I'll attach a diff on Tooltip.js that comments out usage of "initialised" and makes the small change to fluid.tooltip.setup as mentioned above.</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-5606/"><span class="aria-hidden">←</span> Previous: FLUID-5606</a>
        <a class="mx-1" href="/browse/FLUID-5608/">Next: FLUID-5608 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>