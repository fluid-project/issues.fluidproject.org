<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-4576  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-4576 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-4576/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-4576/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-4576/">FLUID-4576</a></li>
            </ol>
        </nav>
        <h1>FLUID-4576: fetchResource resourceSpec success option should accept a function name</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-4576">FLUID-4576</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Improvement">Improvement</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Reopened</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Anastasia%20Cheetham">Anastasia Cheetham</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2012-01-10T11:07:37.362-0500" prefix="">2012-01-10T11:07:37.362-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2015-06-10T20:20:42.252-0400" prefix="">2015-06-10T20:20:42.252-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.4</li>
                            
                            <li>1.5</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Framework</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>It is possible to specify a callback to be invoked upon successful completion of a resource fetch, through the 'success' option of a resourceSpec. However, this option <strong>must</strong> be an actual function; an EL path is not supported. It would be helpful to be able to specify either: this way, success functions could be specified in a defaults block, for example.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-16121">
                        <p class="mb-0"><b>Anastasia Cheetham</b> <i>commented <relative-time datetime="2012-01-10T13:42:36.244-0500">2012-01-10T13:42:36.244-0500</relative-time></i></p>
                        <p>I've created a branch with a test case for this, and an implementation of a solution, and submitted a pull request:<br>
<a href="https://github.com/fluid-project/infusion/pull/197">https://github.com/fluid-project/infusion/pull/197</a></p>

                    </li>
                    
                    <li id="comment-16124">
                        <p class="mb-0"><b>Michelle D'Souza</b> <i>commented <relative-time datetime="2012-08-02T11:46:07.145-0400">2012-08-02T11:46:07.145-0400</relative-time></i></p>
                        <p>Comments from the pull request: </p>
<p>See email review - contents were</p>
<p>Thanks for these improvements, anastasia -</p>
<p>i) the actual fix could still see some redundancy removed. Consider an implementation of the form beginning</p>
<p>fluid.each(["success", "error"], function (callbackName) { .....</p>
<p>ii) there are unnecessary calls to "makeCallbackFunction" in the tests as well as unnecessary expression of the arguments - also the fluid.tests namespace whilst used only in tests will still eventually be subject to congestion. Could you supply more meaningful names to "testSuccessFunction", "callbackFilenames" etc? Or even remove them entirely by the same consideration applied in i).</p>
<p>A suitable way of expressing the tests might be as follows:</p>
<p>..... () {<br>
var filenames = {<br>
success: "Caching-test.html",<br>
error: "Foofer.doodle"<br>
};<br>
var successCases = [{<br>
name: "No success callback",<br>
callback: null},{<br>
name: "Literal success callback",<br>
callback: fluid.tests.testSuccessFunction},{<br>
name: "Named success callback",<br>
callback: "fluid.tests.testSuccessFunction"]<br>
}];<br>
var errorCases = [{<br>
name: "No error callback",<br>
callback: null},{<br>
name: "Literal error callback",<br>
callback: fluid.tests.testErrorFunction},{<br>
name: "Named error callback",<br>
callback: "fluid.tests.testErrorFunction"<br>
}];<br>
fluid.each(successCases, function(scase), {<br>
fluid.each(errorCases, function(ecase), {<br>
fluid.tests.testFetchResourcesCallbacks("<a href="/browse/FLUID-4576/">FLUID-4576</a>: fetchResources callback with " +<br>
scase.name + " and " + ecase.name, filenames, scase.callback, ecase.callback);<br>
})<br>
});</p>
<p>This would succeed in testing a lot more of the implementation surface with smaller and more readable test case bulk. You can see examples of this kind of "structure-driven test case" for example in our Uploader tests at</p>
<p><a href="https://github.com/fluid-project/infusion/blob/master/src/webapp/tests/component-tests/uploader/js/UploaderTests.js#L435-572">https://github.com/fluid-project/infusion/blob/master/src/webapp/tests/component-tests/uploader/js/UploaderTests.js#L435-572</a></p>
<p>JavaScript is a great environment for writing test cases!</p>

                    </li>
                    
                    <li id="comment-16126">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2015-06-10T20:20:42.252-0400">2015-06-10T20:20:42.252-0400</relative-time></i></p>
                        <p>Removing "good first bug" tag since all of the fetchResources infrastructure is/will be deprecated and should be removed from the framework on the Infusion 2.0 timeline</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-4573/"><span class="aria-hidden">←</span> Previous: FLUID-4573</a>
        <a class="mx-1" href="/browse/FLUID-4581/">Next: FLUID-4581 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>