<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-6437  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-6437 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-6437/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-6437/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-6437/">FLUID-6437</a></li>
            </ol>
        </nav>
        <h1>FLUID-6437: "{that}" distributed using "record" points to the source component</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-6437">FLUID-6437</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Open</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Cindy%20Li">Cindy Li</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2019-11-28T15:36:54.773-0500" prefix="">2019-11-28T15:36:54.773-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2019-11-28T16:00:56.666-0500" prefix="">2019-11-28T16:00:56.666-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Framework</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>When using "record" to distribute an option value with a reference to "{that}", "{that}" will be resolved to the source component rather than the target component. In this example:</p>
<pre><code class="hljs language-java">distributeOptions: [{
    record: <span class="hljs-string">"{that}.options.toDistribute"</span>,
    target: <span class="hljs-string">"{that child}.options.toDistributeTarget"</span>
}]
</code></pre>
<p>"<code>that</code>.options.toDistribute" will be resolve to the value of "options.toDistribute" of the source component.</p>
<p>The branch with the test case to demonstrate this problem is <a href="https://github.com/cindyli/infusion/tree/FLUID-6437">https://github.com/cindyli/infusion/tree/FLUID-6437</a></p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-25283">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2019-11-28T16:00:22.974-0500">2019-11-28T16:00:22.974-0500</relative-time></i></p>
                        <p>Note that this is not necessarily a problem, since as it has turned out in the context of use, this was the desirable behaviour on most occasions. In practice it seems that we "forgot" in between the filing of <a href="/browse/FLUID-5258/">FLUID-5258</a> and <a href="/browse/FLUID-6214/">FLUID-6214</a> that the behaviour to resolve at the source was explicitly implemented, as seen in this implementation of fluid.generateExpandBlock:</p>
<pre><code class="hljs language-java">fluid.generateExpandBlock = function (record, that, mergePolicy, localRecord) {
        <span class="hljs-type">var</span> <span class="hljs-variable">expanded</span> <span class="hljs-operator">=</span> fluid.expandOptions(record.options, record.contextThat || that, mergePolicy, localRecord, {defer: <span class="hljs-literal">true</span>});
</code></pre>
<p>Note that the inconsistency noted in <a href="/browse/FLUID-5258/">FLUID-5258</a> remains, in that material distributed into listener and invoker arguments will resolve at the target rather than the source.</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-6436/"><span class="aria-hidden">←</span> Previous: FLUID-6436</a>
        <a class="mx-1" href="/browse/FLUID-6438/">Next: FLUID-6438 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>