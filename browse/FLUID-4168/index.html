<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-4168  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-4168 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-4168/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-4168/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-4168/">FLUID-4168</a></li>
            </ol>
        </nav>
        <h1>FLUID-4168: Renderer component decorator that has a parent component dependent protoTree needs to properly get its protoTree resolved.</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-4168">FLUID-4168</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Not%20A%20Bug">Not A Bug</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>y z</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=y%20z">y z</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2011-03-30T16:53:44.233-0400" prefix="">2011-03-30T16:53:44.233-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2014-03-03T13:11:46.031-0500" prefix="">2014-03-03T13:11:46.031-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.3.1</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.4</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Renderer</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>This is an example of the prototree that will destroy the structuredDate component decorator's protoTree:</p>
<p>".csc-collection-object-objectProductionDates": {<br>
"decorators": [<br>
{<br>
"func": "cspace.makeRepeatable",<br>
"type": "fluid",<br>
"options": {<br>
"elPath": "fields.objectProductionDates",<br>
"protoTree": {<br>
"expander": {<br>
"tree": {<br>
"expander": {<br>
"repeatID": "repeat:",<br>
"tree": {<br>
".csc-object-production-date": {<br>
"value": "${{row}.dateText}",<br>
"decorators": [<br>
{<br>
"func": "cspace.structuredDate",<br>
"type": "fluid",<br>
"options": {<br>
"protoTree": {<br>
"dateText": "${{row}.objdateText}",<br>
"association": "${{row}.association}",<br>
"datePeriod": "${{row}.datePeriod}",<br>
"dateEarliestDate": "${{row}.dateEarliestDate}",<br>
"dateEarliestCertainty": "${{row}.dateEarliestCertainty}",<br>
"dateEarliestQualifier": "${{row}.dateEarliestQualifier}",<br>
"dateEarliestQualifierValue": "${{row}.dateEarliestQualifierValue}",<br>
"dateLatestDate": "${{row}.dateLatestDate}",<br>
"dateLatestCertainty": "${{row}.dateLatestCertainty}",<br>
"dateLatestQualifier": "${{row}.dateLatestQualifier}",<br>
"dateLatestQualifierValue": "${{row}.dateLatestQualifierValue}" <br>
}<br>
}<br>
}<br>
]<br>
}<br>
},<br>
"type": "fluid.renderer.repeat",<br>
"pathAs": "row",<br>
"controlledBy": "fields.objectProductionDates" <br>
} <br>
},<br>
"type": "fluid.noexpand" <br>
} <br>
} <br>
} <br>
} <br>
] <br>
}</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-15812">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2011-03-31T03:39:38.152-0400">2011-03-31T03:39:38.152-0400</relative-time></i></p>
                        <p>The particular form of tree pasted cannot be supported - the expansion process operated by the "repetition expander" cannot cross between the domains of the external protoTree and the protoTree argument attached to the decorator, since that inner protoTree will be expanded by an unrelated expansion process only initiated once the component begins to construct. In fact, protoTrees should not appear as "decorator arguments" in this way - the protoTree attached to a component is not expected to vary with respect to the data processed by the application - this function is reserved for the component's model. This tree and also the design of the structured date component would be simplified a great deal if its protoTree were considered static, and the information held in $<code>row</code> were in fact passed through the model of the component. I have just now written test case to verify that this process works as expected - please take a look at RendererUtilitiesTests.js line 602. The tree in question looks like this: </p>
<p>expander: {<br>
type: "fluid.renderer.repeat",<br>
controlledBy: "vector",<br>
pathAs: "elementPath",<br>
valueAs: "element", <br>
repeatID: "link",<br>
tree: {<br>
decorators: {<br>
type: "fluid",<br>
func: "fluid.tests.repeatDecorator",<br>
options: {<br>
model: {<br>
value: "$<code>element</code>"<br>
}  <br>
}<br>
}  <br>
}<br>
}</p>
<p>Note that the test case also exercises two new "bonus" features - the new grade, "fluid.IoCRendererComponent" which removes the tedious necessity to muck about with instantiators and renderer arguments, and a helpful utility fluid.renderer.getDecoratorComponents();</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-4167/"><span class="aria-hidden">←</span> Previous: FLUID-4167</a>
        <a class="mx-1" href="/browse/FLUID-4169/">Next: FLUID-4169 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>