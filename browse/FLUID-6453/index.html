<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-6453  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-6453 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-6453/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-6453/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-6453/">FLUID-6453</a></li>
            </ol>
        </nav>
        <h1>FLUID-6453: Implement "unhandled rejection" behaviour for Fluid promises</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-6453">FLUID-6453</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=New%20Feature">New Feature</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Reopened</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2020-02-04T12:17:28.047-0500" prefix="">2020-02-04T12:17:28.047-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2021-06-21T11:30:04.423-0400" prefix="">2021-06-21T11:30:04.423-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Framework</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>A useful courtesy exposed by several promise libraries (e.g. node's, Bluebird, etc.) is to provide some custom behaviour when detecting that a promise rejection has gone unhandled. As with similar courtesies such as cancellation, the exact semantic for these features can be very contentious, and the following github issue for node&#160;<a href="https://github.com/nodejs/node/issues/830">https://github.com/nodejs/node/issues/830</a>&#160;contains hundreds of comments over several years debating the merits of different models. Again as usual, any such contentious issues end up being elided when the feature reaches the level of a language spec - ES6 promises contain nothing other than an abstract specification that the host platform may choose to do "something" in the face of an unhandled rejection in the spec at&#160;<a href="https://tc39.es/ecma262/#sec-host-promise-rejection-tracker">https://tc39.es/ecma262/#sec-host-promise-rejection-tracker</a></p>
<p>However it is clear from the point of view of usability that now we have <a href="/browse/FLUID-6148/">FLUID-6148</a> style asynchronously constructing components that we must have some kind of concrete helpful behaviour in this situation. As it stands, someone can issue some component defaults and construct an instance as follows:</p>
<pre><code class="hljs language-java">fluid.defaults(<span class="hljs-string">"fluid.tests.FLUID4982badJSON"</span>, {
        gradeNames: <span class="hljs-string">"fluid.resourceLoader"</span>,
        resources: {
            initModel: {
                dataType: <span class="hljs-string">"json"</span>,
                url: <span class="hljs-string">"/badJSON"</span>
            }
        }
    });

    <span class="hljs-type">var</span> <span class="hljs-variable">that</span> <span class="hljs-operator">=</span> fluid.tests.FLUID4982badJSON();
</code></pre>
<p>In this snippet, the issuer of the constructor asks for a component which depends on some I/O which fails for some reason, but the default result in the case they don't make some specific efforts to observe the completionPromise inside the component's resourceFetcher, or some other not terribly convenient internal, is for the construction to fail silently.</p>
<p>We should do something to improve this situation, whether it involves implementing an unhandled rejection handler for all promises, or some other wise.</p>

            </div>
            
            
            
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-6452/"><span class="aria-hidden">←</span> Previous: FLUID-6452</a>
        <a class="mx-1" href="/browse/FLUID-6454/">Next: FLUID-6454 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>