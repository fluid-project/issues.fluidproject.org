<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-4978  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-4978 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-4978/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-4978/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-4978/">FLUID-4978</a></li>
            </ol>
        </nav>
        <h1>FLUID-4978: Implement circularity detection for the ginger algorithm used in options evaluation</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-4978">FLUID-4978</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Improvement">Improvement</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Justin Obara</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2013-04-13T03:41:49.050-0400" prefix="">2013-04-13T03:41:49.050-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2014-03-03T11:57:25.489-0500" prefix="">2014-03-03T11:57:25.489-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.4</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.5</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>IoC System</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>A circular set of IoC references is a condition that should be detected as early as possible by the framework and diagnosed helpfully. In the old crude "ginger" system we had limited support for circularity detection but in general what we did have was very rarely triggered since the only possible kind of circularity was direct circularity between a set of instantiating components at top level. After a time, the only case where this might be observed was the perverse case of mutual circular injection of overall components, which was not observed in practice.</p>
<p>In the new system, we can do much better at diagnosing circularity at the finest level (a circle of references between individual JSON elements) as well as having strong criteria for rejecting these sets of references - unfortunately the initial implementation of the ginger algorithm does nothing, and circular references bomb out the browser with a stack overflow. In Firefox in particular this is particular undesirable since it usually crashes the browser.</p>
<p>This was first encountered when testing out the old "image-gallery" code for demonstrating the live version of the Uploader component with the newer, <a href="/browse/FLUID-4330/">FLUID-4330</a>-level framework. This bombs out as a result of the following directive in image-gallery.js:</p>
<p>events: {<br>
...<br>
onUploadStart: {<br>
event: "onUploadStart"<br>
}<br>
this somewhat perverse boiling of an event to itself is probably a typo, but succeeded in the old framework since it lacked any ginger expansion process for events, but the effect was most likely for the RHS to evaluate to "undefined" resulting in a standard event. The new framework should reject this as an illegal construction with a reasonably helpful diagnostic - as well as all other cases of direct circular reference.</p>
<p>This should be done using the first of a special set of marker values which will appear temporarily in the expanding structure, the "fluid.inCreationMarker" which is currently unused in trunk. Other special values in the future will include "promise markers" indicating values whose evaluation is blocked on an asynchronous process (in general I/O).</p>
<p>Note that the appearance of these special markers in partially evaluated component material only further increases the premium on preventing participants in the process from "observing" more of the component tree than they should (or need), and tightening up our semantics on partial/full evaluation as per <a href="/browse/FLUID-4930/">FLUID-4930</a>. In general we should be clear that any material supplied to an invoker should be fully evaluated before the point of dispatch - and any material not supplied to an invoker may be in any arbitrary state of partial evaluation. As per <a href="/browse/FLUID-4930/">FLUID-4930</a>, we expect that some invokers can annotate themselves as prepared to accept incomplete arguments, in contrast to the default.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-14319">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2013-05-06T17:20:46.274-0400">2013-05-06T17:20:46.274-0400</relative-time></i></p>
                        <p>Committed to trunk at revision d0f009b</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-4977/"><span class="aria-hidden">←</span> Previous: FLUID-4977</a>
        <a class="mx-1" href="/browse/FLUID-4979/">Next: FLUID-4979 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>