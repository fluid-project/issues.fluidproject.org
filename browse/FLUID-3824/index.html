<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-3824  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-3824 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-3824/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-3824/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-3824/">FLUID-3824</a></li>
            </ol>
        </nav>
        <h1>FLUID-3824: The pager appears broken until you change the number of items per page</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-3824">FLUID-3824</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Critical</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Justin Obara</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Justin%20Obara">Justin Obara</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2010-11-04T10:25:54.658-0400" prefix="">2010-11-04T10:25:54.658-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2010-11-19T12:55:03.547-0500" prefix="">2010-11-19T12:55:03.547-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.3</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Pager</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Steps to reproduce:</p>
<p>1) open the integration example of pager<br>
<a href="http://build.fluidproject.org/infusion/integration-demos/sakai/html/pager-site-setting.html">http://build.fluidproject.org/infusion/integration-demos/sakai/html/pager-site-setting.html</a></p>
<p>2) Notice that there is no data, no page links, and NaN values representing the  item range</p>
<p>3) Changing the number of items per page will cause the pager to work properly</p>

            </div>
            
            
            
            <div class="spacing-y-1">
                <h2>Attachments</h2>
                <ul class="spacing-y-1" role="list">
                    
                    <li>
                        <a href="https://idrc.cachefly.net/issues.fluidproject.org/FLUID/FLUID-3824/FLUID-3824.patch.txt">
                            
                                FLUID-3824.patch.txt
                            
                        </a>
                    </li>
                    
                </ul>
            </div>
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-24769">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2010-11-04T12:49:53.026-0400">2010-11-04T12:49:53.026-0400</relative-time></i></p>
                        <p>"Bug Parade Infusion 1.3" </p>

                    </li>
                    
                    <li id="comment-24770">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2010-11-08T16:45:02.429-0500">2010-11-08T16:45:02.429-0500</relative-time></i></p>
                        <ul>
<li>Took out JSON.parse from line 29, 31.  The variables are already in object form, shouldn't be parsed.  </li>
<li>Also added a "pageSize" in the model option within fluid.paper(), pageSize is not defined at initialization and results a "NaN", then causes an error thrown by computerPageCount() in component/paper/js/Pager.js.  Added "pageSize: 10" to match the initial page size of the demo page. </li>
</ul>

                    </li>
                    
                    <li id="comment-24771">
                        <p class="mb-0"><b>Harris Wong</b> <i>commented <relative-time datetime="2010-11-10T16:45:47.798-0500">2010-11-10T16:45:47.798-0500</relative-time></i></p>
                        <p>JSON.parse error is only thrown on my localhost, it seems my Apache server is converting the JSON string to Objects after the Ajax called.  If I run the html from my file system instead of my localhost, it does require the JSON.parse.  </p>
<p>The "pageSize: 10" did fixed the problem, but I am not sure if this is the best way to address this.  I dug a bit into the code and found out that the values from the Model aren't being merged as they should.  This has something to do with the perserve policy (in Fluid.js - line 536).  The condition return false for !fluid.mergePolicyIs(newPolicy, "preserve"). I think I will have to ping Antranig on this.  Model has a "perserved" policy which doesn't merge.  </p>
<p>In the demo, Model is being override with a<br>
model: {<br>
pageIndex: 3<br>
},<br>
So the pager actually starts at page 4.  However, with the preserved policy, pageSize is now not set (defaulted to 10) and became undefined, which broke the demo.  </p>
<p>Should the fix be just fixing the demo?  Or should there be another function that we should call to trigger pageIndex change?</p>

                    </li>
                    
                    <li id="comment-24772">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2010-11-12T13:44:09.032-0500">2010-11-12T13:44:09.032-0500</relative-time></i></p>
                        <p>Two separate fixes committed for the two parts of the issue - one adjusts the behaviour of the core framework mergePolicy of "preserve" and the other applies jQuery .ajax dataType of "text" to ensure that JSON data is just decoded once on all platforms (it seems that some localhost servers might synthesis a content-Type header based on the file extension, a guess based on Harris' report)</p>

                    </li>
                    
                    <li id="comment-24773">
                        <p class="mb-0"><b>Anastasia Cheetham</b> <i>commented <relative-time datetime="2010-11-19T12:55:03.545-0500">2010-11-19T12:55:03.545-0500</relative-time></i></p>
                        <p>I've reviewed the changes for this - they look sound, and should ensure that similar problems don't arise.</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-3823/"><span class="aria-hidden">←</span> Previous: FLUID-3823</a>
        <a class="mx-1" href="/browse/FLUID-3825/">Next: FLUID-3825 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>