<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-6534  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-6534 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-6534/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-6534/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-6534/">FLUID-6534</a></li>
            </ol>
        </nav>
        <h1>FLUID-6534: Failure to resolve "fast path" resource should not unconditionally cause component destruction</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-6534">FLUID-6534</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Open</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2020-07-23T12:13:56.865-0400" prefix="">2020-07-23T12:13:56.865-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2020-07-24T09:20:37.862-0400" prefix="">2020-07-24T09:20:37.862-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>ResourceLoader</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>This issue only affects the in-progress <a href="/browse/FLUID-6148/">FLUID-6148</a>/FLUID-6145 branches.</p>
<p>Currently, failed resolution of a "fast path" resource in the ResourceLoader (i.e. one which is referred to in a workflow function that must resolve before onCreate, such as a model resource or renderer template) unconditionally causes destruction of the component and indeed the cancellation of the entire component tree transaction which is in progress.<br>
This is an undesirably aggressive semantic for some use cases - for example where the failure should be signalled in some way or perhaps cause resolution of some kind of fallback resource (e.g. an HTTP error code, or some placeholder markup).</p>
<p>This issue arose in development of the <a href="/browse/FLUID-5047/">FLUID-5047</a> "new renderer" and its associated resource mounting via Kettle requests (static and rewriting varieties). If a request is received for a URL which does not have an associated file in the FS corresponding to a renderer template, the resource request fails and the Kettle request is immediately cancelled - since this occurs before it progresses to onCreate where its promise chain is wired up to the express response, this simply causes the connection to reset.</p>
<p>This exposes wider issues relating to how events are geared to promises. A listener to an "onResourceError" event is not in a position to interact with the resource workflow, and further, cannot qualify in order to cancel an "unhandled rejection" message. This at the very least needs to be turned into a promise chain of some kind.</p>
<p>Further, an error was found in the ResourceLoader's "fluid.fetchResources.FetchOne" wrapper, which creates a nonce promise to walk along the resource tree, in which it attempted to forward the resource rejection. Given in practice none of these may be subscribed to, this triggered an unhandled rejection via the new <a href="/browse/FLUID-6453/">FLUID-6453</a> semantic - this shows how careful one needs to be with the promise calculus in the new model.</p>

            </div>
            
            
            
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-6533/"><span class="aria-hidden">←</span> Previous: FLUID-6533</a>
        <a class="mx-1" href="/browse/FLUID-6535/">Next: FLUID-6535 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>