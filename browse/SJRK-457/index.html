<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> SJRK-457  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" SJRK-457 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/SJRK-457/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/SJRK-457/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/SJRK" data-pagefind-filter="project">Social Justice Repair Kit</a></li>
                <li><a href="/browse/SJRK-457/">SJRK-457</a></li>
            </ol>
        </nav>
        <h1>SJRK-457: Update Login &amp; Signup validation to use built-in i18n</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/SJRK-457">SJRK-457</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/SJRK/?type=Improvement">Improvement</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Open</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>N/A</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/SJRK/?reporter=Gregor%20Moss">Gregor Moss</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2021-02-26T17:45:29.366-0500" prefix="">2021-02-26T17:45:29.366-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2021-02-26T17:56:53.406-0500" prefix="">2021-02-26T17:56:53.406-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Storytelling Tool UI</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Update the Login and Signup form validation to use the built-in i18n code provided by <a href="https://github.com/fluid-project/fluid-json-schema/blob/main/docs/validator.md#error-message-internationalisationlocalisation">fluid-json-schema</a>. Currently, the setup involves some customized error messages in the tool-wide l10n message bundles, though their keying system is a little backwards. There are certain validation errors that would be better to share a single message, and the structure that maps these messages to validation errors has the same keys, where these should instead have been the values and the keys would be the validation error paths, similar to how it's set up in fluid-json-schema.</p>
<p>The localized messages:<br>
<a href="https://github.com/fluid-project/sjrk-story-telling/blob/869b48acbe2b8ee735809bfd93a8a0df3da1416f/themes/base/messages/storyMessages_en.json#L87-L96">https://github.com/fluid-project/sjrk-story-telling/blob/869b48acbe2b8ee735809bfd93a8a0df3da1416f/themes/base/messages/storyMessages_en.json#L87-L96</a></p>
<pre><code class="hljs language-javascript"><span class="hljs-string">"authenticationValidationErrors"</span>: {
        <span class="hljs-string">"error_email_blank"</span>: <span class="hljs-string">"The email address is required."</span>,
        <span class="hljs-string">"error_email_format"</span>: <span class="hljs-string">"The email address format is incorrect."</span>,
        <span class="hljs-string">"error_email_length"</span>: <span class="hljs-string">"The email address is too short, it must be at least 3 characters long."</span>,
        <span class="hljs-string">"error_password_blank"</span>: <span class="hljs-string">"The password is required."</span>,
        <span class="hljs-string">"error_password_length"</span>: <span class="hljs-string">"The password is too short, it must be at least 8 characters long."</span>,
        <span class="hljs-string">"error_password_confirmation_blank"</span>: <span class="hljs-string">"The password confirmation is required."</span>,
        <span class="hljs-string">"error_password_confirmation_length"</span>: <span class="hljs-string">"The password confirmation is too short, it must be at least 8 characters long."</span>,
        <span class="hljs-string">"error_password_confirmation_mismatch"</span>: <span class="hljs-string">"The password and password confirmation do not match"</span>
    },
</code></pre>
<p>The current mapping:<br>
<a href="https://github.com/fluid-project/sjrk-story-telling/blob/869b48acbe2b8ee735809bfd93a8a0df3da1416f/src/ui/base-page-authentication.js#L187-L200">https://github.com/fluid-project/sjrk-story-telling/blob/869b48acbe2b8ee735809bfd93a8a0df3da1416f/src/ui/base-page-authentication.js#L187-L200</a></p>
<pre><code class="hljs language-javascript"><span class="hljs-attr">validationErrorMapping</span>: {
            <span class="hljs-comment">/*
             * this collection is meant to map the localized error message keys
             * to their corresponding validationResults error paths
             * the format is:
             *
             * localized_error_message_name: "error.schema.path"
             */</span>
            <span class="hljs-attr">error_email_blank</span>: <span class="hljs-string">"properties.email.required"</span>,
            <span class="hljs-attr">error_email_format</span>: <span class="hljs-string">"properties.email.format"</span>,
            <span class="hljs-attr">error_email_length</span>: <span class="hljs-string">"properties.email.minLength"</span>,
            <span class="hljs-attr">error_password_blank</span>: <span class="hljs-string">"properties.password.required"</span>,
            <span class="hljs-attr">error_password_length</span>: <span class="hljs-string">"properties.password.minLength"</span>
        },
</code></pre>

            </div>
            
            
            
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/SJRK-456/"><span class="aria-hidden">←</span> Previous: SJRK-456</a>
        <a class="mx-1" href="/browse/SJRK-458/">Next: SJRK-458 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>