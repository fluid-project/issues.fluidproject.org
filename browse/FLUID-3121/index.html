<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-3121  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-3121 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-3121/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-3121/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-3121/">FLUID-3121</a></li>
            </ol>
        </nav>
        <h1>FLUID-3121: Reorderers confuse handling of 'container' as selector/element</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-3121">FLUID-3121</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Critical</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Colin Clark</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Chris%20Hubick">Chris Hubick</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2009-08-21T00:01:00.000-0400" prefix="">2009-08-21T00:01:00.000-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2009-10-05T16:17:01.000-0400" prefix="">2009-10-05T16:17:01.000-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.1.1</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.1.2</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Layout Reorderer</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>The Layout Reorderer API specification says about fluid.reorderLayout = function(container, userOptions) that "The container is a CSS-based selector, single-element jQuery object, or DOM element that identifies the DOM element containing the layout.", and all the documentation and sample code I can find supplies a selector string as the first argument to that function.</p>
<p>Yet if I call fluid.reorderLayout = function(container, userOptions) to create my reorderer, supplying the first argument as a selector string, when the reorder later tries to create the model to serialize and post to my afterMoveCallbackUrl, it will explode inside fluid.getId = function (element) because fluid.moduleLayout.layoutToIds = function(idLayout) used to create the model calls fluid.getId(idLayout.container) when the idLayout.container var has been initialized to the given selector string, and not an element as required by getId.</p>
<p>I modified my code to supply the element result from fluid.container = function (containerSpec) to the fluid.reorderLayout function, and now everything appears works as designed for me, with the model being serialized correctly and posted when any modules are reordered.</p>
<p>Looking into the problem deeper, the specification for fluid.reorderer = function (container, options) says '@param container - the root node of the Reorderer', implying that argument should be an element, yet fluid.reorderLayout = function (container, userOptions) says '@param {selector} a selector for the layout container' and yet forwards that 'container' selector param to the reorderLayout function untouched.</p>
<p>I looked into fluid.reorderImages = function (container, options) for comparison, and it starts off looking smarter to me, calling 'var that = fluid.initView = function (componentName, container, userOptions)' and then using the result to create 'var containerEl = fluid.unwrap(that.container)', which it then supplies to several functions.  But then it later appears to go off and supply the original 'container' spec to fluid.reorderer and several other functions which look like they also expect an element?</p>
<p>My newb reaction would be to patch fluid.reorderImages to supply 'containerEl' to all functions expecting an element, and fluid.reorderLayout should be patched to have similar operation, calling fluid.initView, etc.  </p>
<p>But I really have to wonder, am I totally confused and missing something here?</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-22014">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2009-09-21T10:02:28.000-0400">2009-09-21T10:02:28.000-0400</relative-time></i></p>
                        <p>Bug Parade Infusion 1.1.2</p>

                    </li>
                    
                    <li id="comment-22017">
                        <p class="mb-0"><b>Colin Clark</b> <i>commented <relative-time datetime="2009-10-02T18:33:09.000-0400">2009-10-02T18:33:09.000-0400</relative-time></i></p>
                        <p>We need to get this fix in soon, and Joan is away on Fridays. Antranig, it's all yours.</p>

                    </li>
                    
                    <li id="comment-22021">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2009-10-05T00:55:56.000-0400">2009-10-05T00:55:56.000-0400</relative-time></i></p>
                        <p>Fixed at revision 8226 - the core failure is really in fluid.reorderer itself which should satisfy the looser contract and take care of dereferencing by itself. JS docs are updated, but we need to ensure that wiki docs are fixed for the release.</p>

                    </li>
                    
                    <li id="comment-22023">
                        <p class="mb-0"><b>Colin Clark</b> <i>commented <relative-time datetime="2009-10-05T15:34:56.000-0400">2009-10-05T15:34:56.000-0400</relative-time></i></p>
                        <p>I've reviewed Antranig's fix for this issue--and the associated unit test-- and it looks good. I double checked the wiki API documentation and it seems to already convey the jQueryable contract for container. We're all set here for 1.1.2.</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-3120/"><span class="aria-hidden">←</span> Previous: FLUID-3120</a>
        <a class="mx-1" href="/browse/FLUID-3122/">Next: FLUID-3122 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>