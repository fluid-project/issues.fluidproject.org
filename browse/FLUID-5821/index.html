<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-5821  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-5821 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-5821/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-5821/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-5821/">FLUID-5821</a></li>
            </ol>
        </nav>
        <h1>FLUID-5821: that.locate should return an empty element if the selector cannot be found...</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-5821">FLUID-5821</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Bug">Bug</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Blocker</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Tony%20Atkins%20%5BRtF%5D">Tony Atkins [RtF]</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2015-11-25T11:08:37.716-0500" prefix="">2015-11-25T11:08:37.716-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2016-07-08T09:05:44.391-0400" prefix="">2016-07-08T09:05:44.391-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>2.0</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Framework</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>If you run <code>that.locate(selector)</code> from a view component that does not have a matching selector, currently the entire container is returned.  This means that a single typo in a selector can result in mistakenly operating on the entire container.  In talking with Antranig about working around this problem, he proposed simply fixing it in FluidView.js.</p>
<pre><code class="hljs language-java"><span class="hljs-meta">@bosmon</span>, I hope you recall our <span class="hljs-string">"binder"</span> that binds selectors to model values. the-t-in-rtf1 @ <span class="hljs-number">2</span>:<span class="hljs-number">57</span>
I am looking at it again, it fails completely <span class="hljs-keyword">if</span> the selector isn<span class="hljs-string">'t valid. 2:57
if you recall, that.locate() with a bad selector returns the container. 2:58
rather than null. 2:58
I am wrapping the result in fluid.unwrap, which is undefined for selectors that don'</span>t exist and defined <span class="hljs-keyword">for</span> selectors that are. <span class="hljs-number">2</span>:<span class="hljs-number">58</span>
Is using fluid.unwrap a reasonable way to detect <span class="hljs-built_in">this</span>? <span class="hljs-number">2</span>:<span class="hljs-number">59</span>
in other words <span class="hljs-type">var</span> <span class="hljs-variable">element</span> <span class="hljs-operator">=</span> that.locate(selector) <span class="hljs-number">2</span>:<span class="hljs-number">59</span>
and then <span class="hljs-title function_">if</span> <span class="hljs-params">(fluid.unwrap(element)</span>) <span class="hljs-number">2</span>:<span class="hljs-number">59</span>
as a test <span class="hljs-keyword">for</span> validity. <span class="hljs-number">2</span>:<span class="hljs-number">59</span>
<span class="hljs-meta">@Bosmon</span> ^^^^ <span class="hljs-number">3</span>:<span class="hljs-number">01</span>
 Bosmon
the-t-in-rtf1 - you may instead just want to patch the DOM binder Bosmon @ <span class="hljs-number">3</span>:<span class="hljs-number">35</span>	
Bosmon
The correct behaviour <span class="hljs-keyword">for</span> it should be to <span class="hljs-keyword">return</span> a <span class="hljs-number">0</span>-element jQuery in the <span class="hljs-keyword">case</span> the selector matches nothing Bosmon @ <span class="hljs-number">3</span>:<span class="hljs-number">35</span>
We can patch <span class="hljs-built_in">this</span> in a shortly upcoming infusion, <span class="hljs-built_in">this</span> behaviour has annoyed us <span class="hljs-keyword">for</span> far too <span class="hljs-type">long</span> <span class="hljs-number">3</span>:<span class="hljs-number">36</span>
 the-t-in-rtf1
I would be very gratified to have that be my first pull request against infusion. the-t-in-rtf1 @ <span class="hljs-number">3</span>:<span class="hljs-number">39</span>	
the-t-in-rtf1
I would start with the tests, but just to confirm that I<span class="hljs-string">'m on the right track, I would need to change behavior round about here:  https://github.com/fluid-project/infusion/blob/master/src/framework/core/js/FluidView.js#L170 the-t-in-rtf1 @ 3:47
@Bosmon ^^^
</span></code></pre>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-24335">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2016-02-04T15:06:21.388-0500">2016-02-04T15:06:21.388-0500</relative-time></i></p>
                        <p>Merged pull request ( <a href="https://github.com/fluid-project/infusion/pull/657">https://github.com/fluid-project/infusion/pull/657</a> ) into the project repo at 63ec072e54b75db0dbaae33fcac61264ebb8d63d</p>

                    </li>
                    
                    <li id="comment-24336">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2016-02-05T07:58:36.288-0500">2016-02-05T07:58:36.288-0500</relative-time></i></p>
                        <p>Merged pull request ( <a href="https://github.com/fluid-project/infusion-docs/pull/83">https://github.com/fluid-project/infusion-docs/pull/83</a> ) into the infusion-docs repo at 94207308ed8604cce0e9d40b56aa2d411457ba5d</p>

                    </li>
                    
                    <li id="comment-24338">
                        <p class="mb-0"><b>Justin Obara</b> <i>commented <relative-time datetime="2016-02-10T15:52:27.852-0500">2016-02-10T15:52:27.852-0500</relative-time></i></p>
                        <p>Reopened as this is causing the reorder to throw errors on hover for dom.fastLocate and to be broken for mouse interactions.</p>

                    </li>
                    
                    <li id="comment-24339">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2016-02-12T11:18:48.812-0500">2016-02-12T11:18:48.812-0500</relative-time></i></p>
                        <p>The failure sequence here is slightly subtle - the initial cacher to fluid.locate passes a raw DOM element to the "localContainer" argument, which is recognised correctly for the purposes of representing the cache key, but is then returned as the same raw element from "locate" and subsequent calls to "fastLocate" even if they supply a proper jQuery instead, as it ends up polluting the cache.</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-5820/"><span class="aria-hidden">←</span> Previous: FLUID-5820</a>
        <a class="mx-1" href="/browse/FLUID-5822/">Next: FLUID-5822 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>