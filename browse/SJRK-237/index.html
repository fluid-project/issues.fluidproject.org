<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> SJRK-237  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" SJRK-237 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/SJRK-237/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/SJRK-237/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/SJRK" data-pagefind-filter="project">Social Justice Repair Kit</a></li>
                <li><a href="/browse/SJRK-237/">SJRK-237</a></li>
            </ol>
        </nav>
        <h1>SJRK-237: Reorganize project folder structure and theming</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/SJRK-237">SJRK-237</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/SJRK/?type=Task">Task</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/SJRK/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>N/A</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/SJRK/?reporter=Gregor%20Moss">Gregor Moss</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2019-03-12T12:27:35.895-0400" prefix="">2019-03-12T12:27:35.895-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2019-09-12T14:14:20.381-0400" prefix="">2019-09-12T14:14:20.381-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Storytelling Tool Server</li>
                            
                            <li>Storytelling Tool UI</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Our goal for the process of adding a custom theme is:</p>
<ol>
<li>Fork our repository</li>
<li>Make a folder for your theme</li>
<li>Add HTML files or templates if you want to change the default</li>
<li>Create a CSS file to display the way you want</li>
<li>Add a config file that points to your folder</li>
<li>Ability to replace a grade if you want major changes to the tool</li>
</ol>
<p>Three integrator use cases:</p>
<ol>
<li>Use the tool as it is with the defaults</li>
<li>Put a new skin on the tool but keep the behaviour the same</li>
<li>Change the behaviour of some part/parts of the tool</li>
</ol>
<p>To achieve this, a few tasks need to be completed to make adding new custom themes easier for potential integrators:</p>
<ul>
<li>Add default files for all possible sections (header, footer etc.)
<ul>
<li>This will be the "base" theme, and its location will be specified in the "globalConfig" key of sjrk.storyTelling.server, with the intent that it can be changed or overridden</li>
</ul>
</li>
<li>Create a JSON/JSON5 file to configure the theme and other possible values
<ul>
<li>Ensure that when the config file is merged in it allows for switching grades etc.</li>
</ul>
</li>
<li>Move hard-coded markup into templates
<ul>
<li>A stopgap solution would be to add a default fallback option in the current JS code</li>
<li>Another option would be to add all of the potential containers to the page and hide when not used</li>
</ul>
</li>
<li>Create a themes folder at the top level</li>
</ul>
<p>Proposed new hierarchy:</p>
<pre><code class="hljs language-java">deleted_upload
src
-&gt; server
---&gt; db
---&gt; middleware
-&gt; ui
tests
-&gt; server
---&gt; configs
---&gt; uploads
---&gt; utils
-&gt; testData <span class="hljs-comment">/* formerly “binaries” */</span>
-&gt; ui
---&gt; html
---&gt; js
---&gt; messages
themes
-&gt; base
---&gt; css
---&gt; html
---&gt; img
---&gt; messages
---&gt; templates
-&gt; karisma
---&gt; css
---&gt; img
---&gt; templates
-&gt; learningReflections
---&gt; ...
uploads
serverConfig.json5     <span class="hljs-comment">/* not committed to repo, added to .gitignore */</span>
</code></pre>
<p>serverConfig.json5.example</p>
<pre><code class="hljs language-javascript">{
	“theme”: “learningReflections”,
	“port”: “<span class="hljs-number">8081</span>”,
	“ip”: “<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>”, <span class="hljs-comment">/* what does Kettle bind to by default? */</span>
	“adminPassword”: <span class="hljs-literal">undefined</span> <span class="hljs-comment">/* this is the authentication password for deleting stories */</span>
}
</code></pre>
<p>If you use the special key word ‘base’ you will get just the base theme. If you use another theme name we will apply the base theme first and then apply the theme you specified. Themes are specified by a key name which will resolve, using code similar to sjrk.storyTelling.loadThemedPage to resolve that name to a folder in a particular location (also configurable in the server globalConfigs structure)</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-26362">
                        <p class="mb-0"><b>Gregor Moss</b> <i>commented <relative-time datetime="2019-06-25T13:15:20.498-0400">2019-06-25T13:15:20.498-0400</relative-time></i></p>
                        <p>Ensure to update the documentation to be very clear on the steps required to customize a theme, or at least link to a separate MD file that explains the process.</p>
<p>Ensure also to add tests for any new functionality.</p>

                    </li>
                    
                    <li id="comment-26363">
                        <p class="mb-0"><b>Gregor Moss</b> <i>commented <relative-time datetime="2019-06-27T13:42:29.390-0400">2019-06-27T13:42:29.390-0400</relative-time></i></p>
                        <p>Tests to add:</p>
<ul>
<li>sjrk.storyTelling.loadThemedPage</li>
<li>server config loading</li>
<li>new client config endpoint response</li>
<li>theme fallback functionality
<ul>
<li>when no theme is provided
<ul>
<li>base theme should be loaded</li>
</ul>
</li>
<li>when a theme that doesn't exist is provided
<ul>
<li>should it return an error? should it just load the base theme? the latter could be misleading. just an error message should be sufficient for now</li>
</ul>
</li>
<li>when a theme is provided and requested file exists in custom theme but not base theme
<ul>
<li>custom theme file should be loaded</li>
</ul>
</li>
<li>when a theme is provided and requested file exists in custom theme and also base theme
<ul>
<li>custom theme file should be loaded</li>
</ul>
</li>
<li>when a theme is provided and requested file does not exist in custom theme but does in base theme
<ul>
<li>base theme file should be loaded</li>
</ul>
</li>
<li>when a theme is provided and requested file does not exist in either custom or base theme
<ul>
<li>404 should be returned</li>
</ul>
</li>
</ul>
</li>
</ul>

                    </li>
                    
                    <li id="comment-26364">
                        <p class="mb-0"><b>Gregor Moss</b> <i>commented <relative-time datetime="2019-08-02T01:18:38.339-0400">2019-08-02T01:18:38.339-0400</relative-time></i></p>
                        <p>Reopened the issue after discovering problems with the docker setup.</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/SJRK-236/"><span class="aria-hidden">←</span> Previous: SJRK-236</a>
        <a class="mx-1" href="/browse/SJRK-238/">Next: SJRK-238 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>