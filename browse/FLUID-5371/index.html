<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-5371  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-5371 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-5371/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-5371/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-5371/">FLUID-5371</a></li>
            </ol>
        </nav>
        <h1>FLUID-5371: Model relay system should support conditional operation of forward and backward relays</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-5371">FLUID-5371</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Improvement">Improvement</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Blocker</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2014-05-15T03:25:15.578-0400" prefix="">2014-05-15T03:25:15.578-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2014-06-25T16:16:11.135-0400" prefix="">2014-06-25T16:16:11.135-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.5</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Data Binder</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>We've done as well as we could with the "veterancy system" implemented for <a href="/browse/FLUID-5280/">FLUID-5280</a> but almost immediately we have run into a situation with <a href="/browse/FLUID-5368/">FLUID-5368</a> where it is impossible for the framework to automatically determine the correct semantics for resolving conflicts between the two ends of a relay. In this case a single component is initialising a single model, and both ends of the transform hold values on initialisation. This means that we can't use either of our two classic "conflict resolution schemes" which are that i) an undefined value defers to every other value, and ii) an value held in an existing component defers to one held in a currently instantiating component.</p>
<p>The only way out of this situation is to allow the user to supply an explicit hint with the relay record governing the directions that the system can operate it in. This takes care of another use case as well, that of transforms which are really intended to be unidirectional - either because we don't want values propagated backwards at all or because an inverse rule is inappropriately implemented, etc.</p>
<p>We propose to add two new fields to "modelRelay" configuration blocks, with the names "forward" and "backward". These may both take on values in the same range which are as follows:</p>
<p>"always" (default value - same effect as undefined or falsy): Always operate this relay in the specified direction.<br>
"liveOnly": Do not operate the relay in this direction during initialisation of this component's model (during the "initial transaction")<br>
"initOnly": ONLY operate the relay during the initial transaction (no plausible use can be thought of for this option, entered only for completeness)<br>
"never": Never operate this relay in this direction.</p>
<p>With this feature, the <a href="/browse/FLUID-5368/">FLUID-5368</a> situation can be resolved as follows:</p>
<p>{<br>
source: "{fluid5368}.model.forArrayToSetMembership",<br>
target: "{fluid5368}.model.modelInTransit",<br>
backward: "liveOnly",<br>
singleTransform: {<br>
type: "fluid.transforms.arrayToSetMembership",<br>
options: {<br>
"value1": "value1"<br>
}<br>
}</p>
<p>The "liveOnly" entry prevents the relay rule from being operated in the backward direction during component initialisation.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-16108">
                        <p class="mb-0"><b>Colin Clark</b> <i>commented <relative-time datetime="2014-05-27T19:05:59.955-0400">2014-05-27T19:05:59.955-0400</relative-time></i></p>
                        <p>Reviewed and tested by Cindy Li, Justin Obara and me. Committed and pushed to project master at f77fac2d2d8ecd7fe5ffd2f497cf404e8f13814b</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-5370/"><span class="aria-hidden">←</span> Previous: FLUID-5370</a>
        <a class="mx-1" href="/browse/FLUID-5372/">Next: FLUID-5372 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>