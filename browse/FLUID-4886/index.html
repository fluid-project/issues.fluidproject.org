<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-4886  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-4886 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-4886/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-4886/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-4886/">FLUID-4886</a></li>
            </ol>
        </nav>
        <h1>FLUID-4886: Rationalise jqUnit system to be constructor-free, as well as harmonising with GPII implementation on node.js</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-4886">FLUID-4886</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Improvement">Improvement</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Justin Obara</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2013-01-13T18:31:44.360-0500" prefix="">2013-01-13T18:31:44.360-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2014-03-03T12:28:34.516-0500" prefix="">2014-03-03T12:28:34.516-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.4</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>1.5</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Testing Infrastructure</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>Our jqUnit testing system, layered on top of jQuery's QUnit, uses an old-fashioned and misleading system for organising test cases based on the constructor new TestCase(). As well as not agreeing with modern Infusion idioms which are constructor and "this"-free, this sets up misleading expectations in users that tests that are issued will genuinely be scoped to the "TestCase" instance that they are invoked on - in fact QUnit will ignore this scoping and simply apply time-based scoping based on the most recently issued "module" directive.<br>
We should reorganise jqUnit to remove the confusing idiom as well as name "TestCase", and simply directly pass through QUnit's "module" name and semantics unchanged.</p>
<p>As part of this work, we will also rationalise the utilities held in "TestUtils.js" to package them as part of jqUnit itself - this will create a core dependence on jqUnit on Fluid.js, but we are no longer intending to advertise or promote the use of our jqUnit outside the Fluid community. </p>
<p>We will also rationalise the file structure and code loading policy so that the same implementation of jqUnit.js can be used outside the browser environment, for example in the GPII project based on node.js - this will create a separate file jqUnit-browser.js which is to be used within Infusion's brower-based tests themselves.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-15408">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2013-01-16T03:08:12.553-0500">2013-01-16T03:08:12.553-0500</relative-time></i></p>
                        <p>Some further improvements were added to this work package as a result of harmonising with the GPII/node implementation:</p>
<p>[<a href="/browse/FLUID-4886/">FLUID-4886</a> e8034e7] <a href="/browse/FLUID-4886/">FLUID-4886</a>: Updating to latest version of qunit trunk in order to resolve cross-context "equiv" issues in GPII/node - we now use the new qunit "propEqual" method for comparing deep equality as more in keeping with our framework-wide opinions on state-equivalence - see <a href="https://github.com/jquery/qunit/issues/279">https://github.com/jquery/qunit/issues/279</a> for discussion on this. Updates to fluid.js node driver to fix error with global namespace pollution as well as exposing globally useful method fluid.loadInContext for loading non-require-aware framework-style files. We also improve the fidelity of the node context object by adding setTimeout and a self-linking "window" property.</p>

                    </li>
                    
                    <li id="comment-15411">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2013-01-25T17:05:07.189-0500">2013-01-25T17:05:07.189-0500</relative-time></i></p>
                        <p>This hit trunk yesterday at revision d29007c - thanks to michelled and yzen for excellent review. This resulted in some shoring up of support on IE (at least to the level of current trunk) and also ended up uncovering a renderer bug with faulty usage of $.inArray (only visible on IE).</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-4885/"><span class="aria-hidden">←</span> Previous: FLUID-4885</a>
        <a class="mx-1" href="/browse/FLUID-4890/">Next: FLUID-4890 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>