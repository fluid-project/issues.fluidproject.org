<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> KETTLE-16  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" KETTLE-16 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/KETTLE-16/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/KETTLE-16/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/KETTLE" data-pagefind-filter="project">Kettle</a></li>
                <li><a href="/browse/KETTLE-16/">KETTLE-16</a></li>
            </ol>
        </nav>
        <h1>KETTLE-16: Remove "callbackWrappingDataSource" as no longer required by new Infusion architecture</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/KETTLE-16">KETTLE-16</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/KETTLE/?type=Improvement">Improvement</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/KETTLE/?resolution=Incomplete">Incomplete</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/KETTLE/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2013-08-13T14:07:42.311-0400" prefix="">2013-08-13T14:07:42.311-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2013-08-28T02:28:06.757-0400" prefix="">2013-08-28T02:28:06.757-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>0.3</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>For early versions of delivered "new new Kettle" we implemented a "callbackWrappingDataSource" in order to properly contextualise callbacks which issued I/O when honouring a DataSource request. Since <a href="/browse/FLUID-4330/">FLUID-4330</a> was implemented in Infusion, every IoC-configured component can be used to recover its original "instantiator" and so this complexity in Kettle can be removed.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-26125">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2013-08-28T02:22:39.567-0400">2013-08-28T02:22:39.567-0400</relative-time></i></p>
                        <p>We realised today that resolution of this issue is impossible, largely for reasons related to error handling and debuggability. Full reasoning is summarised on the mailing list here: <a href="http://fluid.2324889.n4.nabble.com/Kettle-and-the-Last-Thread-Local-td8798.html">http://fluid.2324889.n4.nabble.com/Kettle-and-the-Last-Thread-Local-td8798.html</a></p>

                    </li>
                    
                    <li id="comment-26126">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2013-08-28T02:28:06.757-0400">2013-08-28T02:28:06.757-0400</relative-time></i></p>
                        <p>Note that in theory, we could gain some benefits from rewriting this facility in terms of node.js "domains" - <a href="http://nodejs.org/api/domain.html">http://nodejs.org/api/domain.html</a> - we could stash the "request component" as a property onto the domain, even though this is a possibly dubious practice, and then use the reference "domain.active" to look it up again. We would replace the use of the callback wrapper with a call to domain.bind(callback) which has a very similar effect. It appears from the docs that we would not actually need to apply the wrapper in practice, due to "If domains are in use, then all new EventEmitter objects (including Stream objects, requests, responses, etc.) will be implicitly bound to the active domain at the time of their creation.". However, domains are still marked as an "unstable" API (level 2), and a major method was just deprecated this week, for example ("dispose"). Also, there will be considerable benefits to keeping all I/O under the eye of the framework - especially once we can start using increasingly declarative approaches as possible under the "asynchronous ginger world", <a href="/browse/FLUID-4982/">FLUID-4982</a></p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/KETTLE-15/"><span class="aria-hidden">←</span> Previous: KETTLE-15</a>
        <a class="mx-1" href="/browse/KETTLE-17/">Next: KETTLE-17 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>