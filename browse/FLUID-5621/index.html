<!DOCTYPE html>
<html lang="en" dir="ltr" data-color-scheme="light">
    <head>
        <title> FLUID-5621  | Fluid Project Issues Archive</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta name="description" content="Archive of Fluid Project issues from the JIRA issue tracker">
        <meta property="og:title" content=" FLUID-5621 |  Fluid Project Issues Archive">
        <meta property="og:description" content="Archive of Fluid Project issues">
        <meta property="og:locale" content="en">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://issues.fluidproject.org/browse/FLUID-5621/">
        <link rel="canonical" href="https://issues.fluidproject.org/browse/FLUID-5621/">


        <link rel="stylesheet" href="/assets/styles/style.css">

        
<script type="module" src="/assets/scripts/relative-time/bundle.js"></script>

    </head>
    <body class="page-issue">
        <header class="mt-3">
            <a class="skip-link" href="#main">Skip to Content</a>
            <nav aria-label="main menu">
                <menu>
                    <li><a rel="home" href="/">Home</a></li>
                    <li><a href="/search/">Search</a></li>
                </menu>
            </nav>
            
        <nav aria-label="breadcrumbs">
            <ol>
                <li><a rel="home" href="/">Home</a></li>
                <li><a href="/projects/FLUID" data-pagefind-filter="project">Fluid Infusion</a></li>
                <li><a href="/browse/FLUID-5621/">FLUID-5621</a></li>
            </ol>
        </nav>
        <h1>FLUID-5621: Improve distributeOptions system so that priority of different distributions can be precisely controlled</h1>

        </header>
        <main id="main">
            
    <div id="content" class="content with-sidebar">
        <div class="spacing-y-1 bg-default">
            <h2>Metadata</h2>
            <dl>
                <div>
                    <dt>Source</dt>
                    <dd><a href="https://fluidproject.atlassian.net/browse/FLUID-5621">FLUID-5621</a></dd>
                </div>
                <div>
                    <dt>Type</dt>
                    <dd>
                        <a href="/projects/FLUID/?type=Improvement">Improvement</a>
                    </dd>
                </div>
                <div>
                    <dt>Priority</dt>
                    <dd>Major</dd>
                </div>
                <div>
                    <dt>Status</dt>
                    <dd>Closed</dd>
                </div>
                <div>
                    <dt>Resolution</dt>
                    <dd>
                            <a href="/projects/FLUID/?resolution=Fixed">Fixed</a>
                        
                    </dd>
                </div>
                <div>
                    <dt>Assignee</dt>
                    <dd>Antranig Basman</dd>
                </div>
                <div>
                    <dt>Reporter</dt>
                    <dd>
                        <a href="/projects/FLUID/?reporter=Antranig%20Basman">Antranig Basman</a>
                    </dd>
                </div>
                <div>
                    <dt>Created</dt>
                    <dd><relative-time datetime="2015-04-15T08:58:49.938-0400" prefix="">2015-04-15T08:58:49.938-0400</relative-time></dd>
                </div>
                <div>
                    <dt>Updated</dt>
                    <dd><relative-time datetime="2017-02-27T15:49:17.848-0500" prefix="">2017-02-27T15:49:17.848-0500</relative-time></dd>
                </div>
                <div>
                    <dt>Versions</dt>
                    <dd>
                        
                        N/A
                        
                    </dd>
                </div>
                <div>
                    <dt>Fixed Versions</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>2.0</li>
                            
                        </ol>
                        
                    </dd>
                </div>
                <div>
                    <dt>Component</dt>
                    <dd>
                        
                        <ol role="list">
                            
                            <li>Framework</li>
                            
                        </ol>
                        
                    </dd>
                </div>
            </dl>
        </div>

        <div>
            <div class="spacing-y-1">
                <h2>Description</h2>
                <p>The old "polymorphism at a distance" system, "demands blocks", at least had a well-defined (if not entirely usable) system for arbitrating priority of different "advice" entered into the system - this was inspired by CSS's scheme for priority based on number of matching clauses in the selector.</p>
<p>In theory, our IoCSS based system should be an even better fit for the CSS priority scheme, but in the meantime we have gathered more experience and our thinking has moved on. With <a href="/browse/FLUID-5587/">FLUID-5587</a>, we have supplied well-defined and stable names to distributions via namespaces which will allow a more principled and flexible priority scheme, based partly on the <a href="/browse/FLUID-5506/">FLUID-5506</a> constraint system, to be implemented. It's crucial that any creator in the system has full ability to adjust their priority to any arbitrary position relative to all previously registered (by him) creators without having to pervert their expression through schemes such as "clause duplication" which are, for example, recommended in resources such as <a href="http://csswizardry.com/2014/07/hacks-for-dealing-with-specificity/">http://csswizardry.com/2014/07/hacks-for-dealing-with-specificity/</a> </p>
<p>The base scheme for distribution priority derives "fixed priorities" (that is, the equivalents of numeric priorities for <a href="/browse/FLUID-5506/">FLUID-5506</a> listeners) based on a "topological metric" in the component tree - a distribution which has a shorter path between the source and the target takes priority over one with a longer path.</p>
<p>Following these, we allow relative "constraint-based" priorities (using the same syntax and implementation as <a href="/browse/FLUID-5506/">FLUID-5506</a>) to allow any distribution to choose its priority relative to any other, based on the namespace of the other distribution.</p>
<p>For example,</p>
<p>distributeOptions: {<br>
oneDistribution: {<br>
record ....<br>
target ....<br>
priority: "after:anotherDistribution"<br>
}, {<br>
anotherDistribution: {<br>
record .....<br>
target ...<br>
}<br>
}</p>
<p>shows two distributions, one of which explicitly defers to the other. Note that this priority is resolved amongst all distributions competing for the same <strong>target</strong> at a particular time, not amongst those from a particular <strong>source</strong>.</p>

            </div>
            
            
            
            
            <div class="spacing-y-1">
                <h2>Comments</h2>
                <ul class="spacing-y-2" role="list">
                    
                    <li id="comment-22532">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2015-04-15T09:02:11.803-0400">2015-04-15T09:02:11.803-0400</relative-time></i></p>
                        <p>A problem resulting from lack of this feature was reported in IRC at <a href="https://botbot.me/freenode/fluid-work/2015-04-13/?msg=36502682&page=1">https://botbot.me/freenode/fluid-work/2015-04-13/?msg=36502682&amp;page=1</a> . Note that whilst the new "contextAwareness" scheme would allow this problem to be solved, it is a little heavyweight for the situation described in the channel, where one merely had a tooltip in a particular context that required some custom styling.</p>

                    </li>
                    
                    <li id="comment-22534">
                        <p class="mb-0"><b>Antranig Basman</b> <i>commented <relative-time datetime="2015-08-20T14:00:27.561-0400">2015-08-20T14:00:27.561-0400</relative-time></i></p>
                        <p>Merged into trunk at revision 282f1a318718eed0b0ec060fb8b4ad254417fd7e</p>

                    </li>
                    
                </ul>
            </div>
            
        </div>
    </div>

        </main>
        <footer>
            
<nav aria-labelledby="pagination">
    <h2 class="visually-hidden">pagination</h2>
    <p class="flex">
        
        
        <a class="mx-1" href="/browse/FLUID-5620/"><span class="aria-hidden">←</span> Previous: FLUID-5620</a>
        <a class="mx-1" href="/browse/FLUID-5622/">Next: FLUID-5622 <span class="aria-hidden">→</span></a>
    </p>
</nav>

        </footer>
    </body>
</html>