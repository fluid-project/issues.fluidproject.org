---json
{
  "title": "FLUID-4917",
  "summary": "Implement \"demands block horizon\" system enabling demands block resolution to be cut off when meeting first instance of a context name",
  "tags": "FLUID",
  "project": {
    "key": "FLUID",
    "title": "Fluid Infusion"
  },
  "type": "Improvement",
  "priority": "Major",
  "status": "Closed",
  "resolution": "Fixed",
  "assignee": "Justin Obara",
  "reporter": "Antranig Basman",
  "date": "2013-02-19T05:22:16.507-0500",
  "updated": "2017-05-12T11:12:53.629-0400",
  "versions": [
    "1.4"
  ],
  "fixVersions": [
    "1.5"
  ],
  "components": [
    "IoC System",
    "Progressive Enhancement"
  ],
  "environment": null,
  "issueLinks": [
    {
      "type": "Related to",
      "url": "/browse/FLUID-4187/",
      "key": "FLUID-4187"
    },
    {
      "type": "Related to",
      "url": "/browse/FLUID-4916/",
      "key": "FLUID-4916"
    }
  ],
  "attachments": [],
  "comments": [
    {
      "author": "Antranig Basman",
      "date": "2013-05-06T17:17:09.683-0400",
      "body": "Committed to trunk at revision a653e4e\n"
    }
  ]
}
---
A fully consistent implementation of the ProgressiveEnhancement system requires us to be able to declaratively curtail demands block searches in order to make sure that at most one instance (the closest to the point of resolution) of a particular ProgressiveCheckerForComponent (PCFC) is taken into account. This is necessary because the current demands block system is only ADDITIVE - and so without some form of "horizon" system, the union of all context tags for a particular PCFC that can be seen up the component tree hierarhcy would be seen by the component instance which is resolving - which would lead to ambiguous and possibly incorrect matches for a required component implementation.

The intent of the PCFC system is that decisions made at a higher level in the tree can be overridden by means of PCFC instances lower down the tree - either to countermand them in the case of a localised set of the tree, or else to reflect more detailed information about user context + preferences.

A syntax like the following is proposed:

```java
fluid.demands("fluid.uploaderImpl", "fluid.uploader.html5",
    { funcName: "fluid.uploader.multiFileUploader", horizon: "fluid.uploader.progressiveCheck" }
);
```

Â 

The "fluid.uploader.progressiveCheck" name is already automatically generated by the PCFC system.

        